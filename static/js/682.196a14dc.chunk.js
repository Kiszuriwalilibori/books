"use strict";(self.webpackChunkgoogle_books_finder=self.webpackChunkgoogle_books_finder||[]).push([[682],{1682:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var i=n(1413),r=n(9439),s=n(2791),a=n(6666),o=n.n(a),l=n(364),u=n(2506),c=n(1573),d=n(7689),f=n(8869),h=n(7718),b=n(198),m=n(6784),v=n(4467),g=n(9478);var j=n(184);var p=(0,l.$j)((function(e){return{isLoading:e.loading.isLoading}}),(function(e){return{fetchFromFavorites:function(){return e((function(e){try{var t=new m.X4((function(e){return e.kind===g.Zg})).getAll();e((0,v.storeBooks)(t)),e((0,v.setIsFromNetwork)(!1))}catch(i){var n=i instanceof Error?i.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";e((0,v.showError)({isError:!0,errorMessage:n}))}}))}}}))((function(e){var t=(0,d.s0)(),n=e.fetchFromFavorites,i=e.isLoading,r=(0,b.wR)().favoriteBooks;return(0,j.jsx)(h.zx,{disabled:!r.areNotEmpty()||i,className:"button--favorites",onClick:function(){n(),t(f.Z.books)},children:"Ulubione"})})),k=n(5987),w=n(65),x=["isDisabled","label","name"];function y(e){e.target.focus()}var Z,T=function(e){var t=e.isDisabled,n=e.label,r=e.name,s=(0,k.Z)(e,x);return(0,j.jsx)(h.u,{role:"tooltip",title:"Nie mniej ni\u017c dwa znaki w tym jeden alfanumeryczny",placement:"top",children:(0,j.jsx)(w.Z,(0,i.Z)({disabled:t,"aria-label":"input field for ".concat(r," field"),label:n,id:r,size:"small",variant:"outlined",onMouseEnter:y},s))})},E=n(871),S=n.n(E),z=n(2809),C=n.n(z),A=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+S().flow(S().toPairs,S().filter((function(e){return!(""===e[1])})),S().map((function(e){return C()(e,":")})),S().join("+"))(t)+"&maxResults=40"+g._M+"&startIndex="},F=n(5671),_=n(3144),N=n(9714);!function(e){e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety"}(Z||(Z={}));var R,U,I,L=[{name:N.a.authors,placeholder:Z.authors},{name:N.a.title,placeholder:Z.title},{name:N.a.subject,placeholder:Z.subject}],V=new(function(){function e(t){(0,F.Z)(this,e),this.fields=void 0,this.fields=t}return(0,_.Z)(e,[{key:"getPlaceholder",value:function(e){return this.fields.filter((function(t){return t.name===e}))[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var t in this.fields)e[this.fields[t].name]="";return e}},{key:"getFields",get:function(){return this.fields}}]),e}())(L),B=n(7790),O=n.n(B),P=n(6364),W=n.n(P),J=n(4942);!function(e){e.AUTHORS="authors",e.TITLE="title",e.SUBJECT="subject"}(I||(I={}));var M=(R={},(0,J.Z)(R,I.AUTHORS,"Autor"),(0,J.Z)(R,I.TITLE,"Tytu\u0142"),(0,J.Z)(R,I.SUBJECT,"Etykiety"),R),D=(U={},(0,J.Z)(U,I.AUTHORS,""),(0,J.Z)(U,I.TITLE,""),(0,J.Z)(U,I.SUBJECT,""),U),H={isValid:!0,message:""},q=function(e){var t,n=H,i=[],r=O()(e);if(!W()(r))for(var s in r)if(!1===((t=r[s]).length>=2&&/\d|[A-z]/.test(t))){var a=V.getPlaceholder(s);n={isValid:!1,message:"Nieprawid\u0142owe dane w polu "+a},i.push(a)}return!1===n.isValid&&(n.message="Nieprawid\u0142owe warto\u015bci w polach: "+i.join(", ")),n},G=n(5374),X=n(2465),Y=n(7014),$=function(){var e=s.useState(H),t=(0,r.Z)(e,2),n=t[0],a=t[1],d=s.useState(""),f=(0,r.Z)(d,2),b=f[0],m=f[1],v=(0,c.i)((function(e){return e.loading.isLoading}),l.wU),g=(0,l.v9)(Y.YW),k=(0,G.l)(),w=(0,u.TA)({initialValues:D,onSubmit:function(e){var t=q(e);a(t),t.isValid&&m(A(e))}}),x=w.values,y=w.handleSubmit,Z=w.getFieldProps,E=w.handleReset,S=s.useCallback((function(){return""===Object.values(x).join("")}),[x]),z=s.useCallback((function(){a(H),E(null)}),[]);return s.useEffect((function(){var e=new AbortController;return b&&k(b,e),function(){return null===e||void 0===e?void 0:e.abort()}}),[b,k]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(X._z,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,j.jsx)(h.sF,{}),(0,j.jsx)(h.bZ,{shouldRender:!n.isValid,alertMessage:n.message}),(0,j.jsxs)(X.tW,{id:"search__form",children:[(0,j.jsx)(X.A4,{children:Object.values(I).map((function(e){return(0,j.jsx)(T,(0,i.Z)({isDisabled:v,label:M[e]},Z(e)),o()())}))}),(0,j.jsxs)(X.RJ,{children:[(0,j.jsx)(h.zx,{form:"search__form",disabled:v||S()||!g,onClick:y,className:"button--ok",type:"submit",children:"Szukaj"}),(0,j.jsx)(h.zx,{disabled:v||S(),onClick:z,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,j.jsx)(p,{})]})]})]})})}}}]);
//# sourceMappingURL=682.196a14dc.chunk.js.map