"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[488],{7488:function(n,e,i){i.r(e),i.d(e,{default:function(){return _}});var t=i(5544),r=i(5043),a=i(2166),o=i(9379),s=i(3892),l=i(8222),u=i.n(l),c=i(4245),d=i(2606),f=i(3216),h=i(7861),m=i(3915),b=i(744),p=i(8049),j=i(4558);var v=i(579);var k=(0,a.Ng)(function(n){return{isLoading:n.loading.isLoading}},function(n){return{fetchFromFavorites:function(){return n(function(n){try{var e=new b.v_(function(n){return n.kind===j.XI}).getAll();n((0,p.storeBooks)(e)),n((0,p.setIsFromNetwork)(!1))}catch(t){var i=t instanceof Error?t.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";n((0,p.showError)({isError:!0,errorMessage:i}))}})}}})(function(n){var e=(0,f.Zp)(),i=n.fetchFromFavorites,t=n.isLoading,a=(0,m.cs)().favoriteBooks,o=(0,r.useCallback)(function(){i(),e(h.A.books)},[i,e]);return(0,v.jsx)(c.$n,{disabled:!a.areNotEmpty()||t,className:"button--favorites",onClick:o,children:"Ulubione"})}),g=i(45),y=i(8623),w=["isDisabled","label","name","fieldErrors"],z=(0,r.memo)(function(n){var e=n.isDisabled,i=n.label,t=n.name,a=n.fieldErrors,s=(0,g.A)(n,w),l=(0,r.useMemo)(function(){return null===a||void 0===a?void 0:a.find(function(n){return n.field===t})},[a,t]),u=Boolean(l&&l.errors.length>0),d=(0,r.useMemo)(function(){var n="Wymagania:\n\u2022 Minimum 2 znaki\n\u2022 Co najmniej jedna litera lub cyfra\n\u2022 Bez spacji na pocz\u0105tku i ko\u0144cu";return u&&(n+="\n\nB\u0142\u0119dy w tym polu:\n".concat(l.errors.map(function(n){return"\u2022 ".concat(n)}).join("\n"))),n},[u,l]);return(0,v.jsx)(c.m_,{role:"tooltip",title:d,placement:"top",arrow:!0,children:(0,v.jsx)(y.A,(0,o.A)({disabled:e,"aria-label":"input field for ".concat(t," field"),label:i,id:t,size:"small",variant:"outlined"},s))})});z.displayName="SearchField";var x=z,C=i(3698),A=i(3029),E=i(2901),F=i(6892),S=function(n){return n.authors="Autor",n.title="Tytu\u0142",n.subject="Etykiety",n}({}),M=[{name:F.C.authors,placeholder:S.authors},{name:F.C.title,placeholder:S.title},{name:F.C.subject,placeholder:S.subject}],N=(new(function(){return(0,E.A)(function n(e){(0,A.A)(this,n),this.fields=void 0,this.fields=e},[{key:"getPlaceholder",value:function(n){return this.fields.filter(function(e){return e.name===n})[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var n={};for(var e in this.fields)n[this.fields[e].name]="";return n}},{key:"getFields",get:function(){return this.fields}}])}())(M),i(7273)),W=i.n(N),B=i(4320),L=i.n(B),P=function(n){var e=[];return 0===n.length||(1===n.length&&e.push("musi zawiera\u0107 co najmniej 2 znaki"),/[A-Za-z0-9]/.test(n)||e.push("musi zawiera\u0107 co najmniej jeden znak alfanumeryczny (litera lub cyfra)"),n.trim()!==n&&e.push("nie mo\u017ce zaczyna\u0107 si\u0119 ani ko\u0144czy\u0107 spacj\u0105"),/^\s*$/.test(n)&&n.length>0&&e.push("nie mo\u017ce sk\u0142ada\u0107 si\u0119 tylko z bia\u0142ych znak\xf3w"),/[<>{}[\]\\]/.test(n)&&e.push("zawiera niedozwolone znaki specjalne")),e},T=function(n){return C.Pu[n]||n},V=function(n){var e=(0,o.A)({},C.T9),i=[],t=W()(n);if(!L()(t))for(var r in t){var a=t[r],s=P(a);s.length>0&&i.push({field:r,value:a,errors:s})}if(i.length>0){var l="Nieprawid\u0142owe warto\u015bci w polach: ".concat(i.map(function(n){return T(n.field)}).join(", ")),u=function(n){if(0===n.length)return"";var e="B\u0142\u0119dy walidacji:\n";return n.forEach(function(n,i){var t=T(n.field);e+="\n".concat(i+1,'. Pole "').concat(t,'"'),n.value.length>20?e+=' (warto\u015b\u0107: "'.concat(n.value.substring(0,20),'...")'):e+=' (warto\u015b\u0107: "'.concat(n.value,'")'),n.errors.forEach(function(n){e+="\n   \u2022 ".concat(n)})}),e+="\n\nWymagania dla wszystkich p\xf3l:",e+="\n\u2022 Minimum 2 znaki",e+="\n\u2022 Co najmniej jedna litera lub cyfra",e+="\n\u2022 Bez spacji na pocz\u0105tku i ko\u0144cu"}(i);e={isValid:!1,message:l,fieldErrors:i},console.group("\ud83d\udd0d Szczeg\xf3\u0142y b\u0142\u0119d\xf3w walidacji:"),console.log(u),console.table(i.map(function(n){return{Pole:T(n.field),"Warto\u015b\u0107":n.value,"B\u0142\u0119dy":n.errors.join("; ")}})),console.groupEnd()}return e},I=i(3555),O=i.n(I),D=i(6665),$=i.n(D),R=function(n){var e=n.isLoading,i=n.isOnline,a=n.onSubmit,l=n.onValidationChange,f=u()(),h=r.useState(C.T9),m=(0,t.A)(h,2),b=m[0],p=m[1],j=(0,s.Wx)({initialValues:C.LX,onSubmit:function(n){var e=V(n);p(e),l(e),e.isValid&&a(n)}}),g=j.values,y=j.handleSubmit,w=j.getFieldProps,z=j.handleReset,A=(0,r.useCallback)(function(){return""===Object.values(g).join("")},[g]),E=(0,r.useCallback)(function(){p(C.T9),l(C.T9),z(null)},[z,l]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c.am,{shouldRender:!b.isValid,alertMessage:b.message,fieldErrors:b.fieldErrors,onClose:function(){p(C.T9),l(C.T9)}}),(0,v.jsxs)(d.kW,{id:f,children:[(0,v.jsx)(d.OM,{children:Object.values(C.y7).map(function(n){return(0,v.jsx)(x,(0,o.A)({isDisabled:e,label:C.Pu[n],fieldErrors:b.fieldErrors},w(n)),n)})}),(0,v.jsxs)(d.aL,{children:[(0,v.jsx)(c.$n,{form:f,disabled:e||A()||!i,onClick:y,className:"button--ok",type:"submit",children:"Szukaj"}),(0,v.jsx)(c.$n,{disabled:e||A(),onClick:E,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,v.jsx)(k,{})]})]})]})},X=i(2442),Z=i(4691),_=function(){var n=(0,r.useState)(""),e=(0,t.A)(n,2),i=e[0],o=e[1],s=(0,a.d4)(Z.QW),l=(0,a.d4)(X.tp),u=(0,m.m5)(),f=(0,r.useCallback)(function(n){o(function(n){var e={inauthor:n.authors,intitle:n.title,subject:n.subject,keyword:n.keyword};return"https://www.googleapis.com/books/v1/volumes?q="+O().flow(O().toPairs,O().filter(function(n){return""!==(0,t.A)(n,2)[1]}),O().map(function(n){var e=(0,t.A)(n,2),i=e[0],r=e[1];return $()([i,r],":")}),O().join("+"))(e)+"&maxResults=40"+j.MD+"&startIndex="}(n))},[]),h=(0,r.useCallback)(function(n){},[]);return(0,r.useEffect)(function(){var n=new AbortController;return i&&(console.log(i),u(i,n)),function(){return n.abort()}},[i,u]),(0,v.jsxs)(d.LN,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,v.jsx)(c.M9,{}),(0,v.jsx)(R,{isLoading:s,isOnline:l,onSubmit:f,onValidationChange:h})]})}}}]);
//# sourceMappingURL=488.acbbbb9a.chunk.js.map