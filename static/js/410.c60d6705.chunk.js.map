{"version":3,"file":"static/js/410.c60d6705.chunk.js","mappings":"+TA8EA,IAQA,GAAeA,EAAAA,EAAAA,IAJS,SAACC,GAAoB,MAAM,CAC/CC,UAAWD,EAAME,QAAQD,UAC5B,EAN0B,SAACE,GAAqB,MAAM,CACnDC,mBAAoB,WAAF,OAAQD,ECtEnB,SAAAA,GACH,IACI,IACME,EADY,IAAIC,EAAAA,GAAgB,SAAAC,GAAI,OAAIA,EAAKC,OAASC,EAAAA,EAAwB,GACtCC,SAC9CP,GAASQ,EAAAA,EAAAA,YAAWN,IACpBF,GAASS,EAAAA,EAAAA,mBAAiB,GAC9B,CAAE,MAAOC,GACL,IAAMC,EAAeD,aAAiBE,MAAQF,EAAMG,QAAU,yEAC9Db,GACIc,EAAAA,EAAAA,WAAU,CACNC,SAAS,EACTJ,aAAcA,IAG1B,CACJ,EDuD6D,EAChE,EAMD,CA1BO,SAAyBK,GAC5B,IAAMC,GAAWC,EAAAA,EAAAA,MACTjB,EAAkCe,EAAlCf,mBAAoBH,EAAckB,EAAdlB,UACpBqB,GAAkBC,EAAAA,EAAAA,MAAlBD,cACAE,GAAMC,EAAAA,EAAAA,MAAND,EAEFE,GAAmBC,EAAAA,EAAAA,aAAY,WACjCvB,IACAgB,EAASQ,EAAAA,EAAMC,MACnB,EAAG,CAACzB,EAAoBgB,IAExB,OACIU,EAAAA,EAAAA,KAACC,EAAAA,GAAM,CAACC,UAAWV,EAAcW,eAAiBhC,EAAWiC,UAAU,oBAAoBC,QAAST,EAAiBU,SAChHZ,EAAE,sBAGf,G,gEEhEMa,GAAcC,EAAAA,EAAAA,MAAK,SAACnB,GACtB,IAAQoB,EAAwDpB,EAAxDoB,WAAYC,EAA4CrB,EAA5CqB,MAAOC,EAAqCtB,EAArCsB,KAAMC,EAA+BvB,EAA/BuB,YAAgBC,GAAUC,EAAAA,EAAAA,GAAKzB,EAAK0B,GAG/DC,GAAqBC,EAAAA,EAAAA,SAAQ,WAC/B,OAAkB,OAAXL,QAAW,IAAXA,OAAW,EAAXA,EAAaM,KAAK,SAAAnC,GAAK,OAAIA,EAAMoC,QAAUR,CAAI,EAC1D,EAAG,CAACC,EAAaD,IAEXS,EAAYC,QAAQL,GAAsBA,EAAmBM,OAAOC,OAAS,GAG7EC,GAAiBP,EAAAA,EAAAA,SAAQ,WAC3B,IAAIQ,EAAU,iIAMd,OAJIL,IACAK,GAAO,oCAAAC,OAA8BV,EAAoBM,OAAOK,IAAI,SAAA5C,GAAK,gBAAA2C,OAAS3C,EAAK,GAAI6C,KAAK,QAG7FH,CACX,EAAG,CAACL,EAAWJ,IAIf,OACIhB,EAAAA,EAAAA,KAAC6B,EAAAA,GAAO,CAACC,KAAK,UAAUC,MAAOP,EAAgBQ,UAAU,MAAMC,OAAK,EAAA3B,UAChEN,EAAAA,EAAAA,KAACkC,EAAAA,GAASC,EAAAA,EAAAA,GAAA,CAACjC,SAAUO,EAAY,gCAAAiB,OAA+Bf,EAAI,UAAUD,MAAOA,EAAO0B,GAAIzB,EAAM0B,KAAK,QAAQC,QAAQ,YAAezB,KAGtJ,GAEAN,EAAYgC,YAAc,cAE1B,Q,wCC1CYC,EAAY,SAAZA,GAAY,OAAZA,EAAY,gBAAZA,EAAY,mBAAZA,EAAY,mBAAZA,CAAY,MAUXC,EAA0C,CACnD,CAAE9B,KAAM+B,EAAAA,EAAiBC,QAASC,YAAaJ,EAAaG,SAC5D,CAAEhC,KAAM+B,EAAAA,EAAiBX,MAAOa,YAAaJ,EAAaT,OAC1D,CAAEpB,KAAM+B,EAAAA,EAAiBG,QAASD,YAAaJ,EAAaK,U,GAwB3C,IAtBH,WAIb,OAAAC,EAAAA,EAAAA,GAFD,SAAAC,EAAYC,IAA4BC,EAAAA,EAAAA,GAAA,KAAAF,GAAA,KADxCC,YAAM,EAEFE,KAAKF,OAASA,CAClB,EAAC,EAAAG,IAAA,iBAAAC,MACD,SAAeC,GAGX,OAF2BH,KAAKF,OAAOM,OAAO,SAAC7E,GAAiB,OAAKA,EAAKkC,OAAS0C,CAAG,GAAE,GAE3ET,WACjB,GAAC,CAAAO,IAAA,mCAAAI,IAED,WACI,IAAMC,EAAoC,CAAC,EAC3C,IAAK,IAAIC,KAAOP,KAAKF,OACjBQ,EAAON,KAAKF,OAAOS,GAAK9C,MAAQ,GAEpC,OAAO6C,CACX,GAAC,CAAAL,IAAA,YAAAI,IACD,WACI,OAAOL,KAAKF,MAChB,IAAC,CApBa,GAsBG,CAAiBP,G,yDCtBhCiB,EAAqB,SAACN,GACxB,IAAM9B,EAAmB,GAEzB,OAAqB,IAAjB8B,EAAM7B,SAIW,IAAjB6B,EAAM7B,QACND,EAAOqC,KAAKC,EAAAA,GAAAA,EAAO,uCAGlB,cAAcC,KAAKT,IACpB9B,EAAOqC,KAAKC,EAAAA,GAAAA,EAAO,0CAGnBR,EAAMU,SAAWV,GACjB9B,EAAOqC,KAAKC,EAAAA,GAAAA,EAAO,sCAGnB,QAAQC,KAAKT,IAAUA,EAAM7B,OAAS,GACtCD,EAAOqC,KAAKC,EAAAA,GAAAA,EAAO,4CAInB,cAAcC,KAAKT,IACnB9B,EAAOqC,KAAKC,EAAAA,GAAAA,EAAO,2CArBZtC,CAyBf,EAOMyC,EAAgB,SAACC,GACnB,OAAOC,EAAAA,GAA8BD,IAAiCA,CAC1E,EAwCaE,EAAgB,SAAClB,GAC1B,IAAImB,GAAkChC,EAAAA,EAAAA,GAAA,GAAQiC,EAAAA,IACxCxD,EAAsC,GAEtCyD,EAAoEC,IAAOtB,GAEjF,IAAKuB,IAAQF,GACT,IAAK,IAAMlB,KAAOkB,EAAgB,CAC9B,IAAMG,EAAaH,EAAelB,GAC5B7B,EAASoC,EAAmBc,GAE9BlD,EAAOC,OAAS,GAChBX,EAAY+C,KAAK,CACbxC,MAAOgC,EACPC,MAAOoB,EACPlD,OAAQA,GAGpB,CAGJ,GAAIV,EAAYW,OAAS,EAAG,CACxB,IAAMkD,EAAgBb,EAAAA,GAAAA,EAAO,2BAA4B,CACrDZ,OAAQpC,EAAYe,IAAI,SAAA+C,GAAE,OAAIX,EAAcW,EAAGvD,MAAM,GAAES,KAAK,QAE1D+C,EA1DgB,SAAC/D,GAC3B,GAA2B,IAAvBA,EAAYW,OAAc,MAAO,GAErC,IAAIrC,EAAU0E,EAAAA,GAAAA,EAAO,oBAAsB,MAsB3C,OApBAhD,EAAYgE,QAAQ,SAACC,EAAYC,GAC7B,IAAMC,EAAahB,EAAcc,EAAW1D,OAC5CjC,GAAO,KAAAwC,OAASoD,EAAQ,EAAC,MAAApD,OAAKkC,EAAAA,GAAAA,EAAO,oBAAmB,MAAAlC,OAAKqD,EAAU,KAEnEF,EAAWzB,MAAM7B,OAAS,GAC1BrC,GAAO,KAAAwC,OAASkC,EAAAA,GAAAA,EAAO,oBAAmB,OAAAlC,OAAMmD,EAAWzB,MAAM4B,UAAU,EAAG,IAAG,SAEjF9F,GAAO,KAAAwC,OAASkC,EAAAA,GAAAA,EAAO,oBAAmB,OAAAlC,OAAMmD,EAAWzB,MAAK,MAGpEyB,EAAWvD,OAAOsD,QAAQ,SAAC7F,GACvBG,GAAO,eAAAwC,OAAc3C,EACzB,EACJ,GAEAG,GAAW,OAAS0E,EAAAA,GAAAA,EAAO,2BAA6B,IACxD1E,GAAW,YAAS0E,EAAAA,GAAAA,EAAO,yCAC3B1E,GAAW,YAAS0E,EAAAA,GAAAA,EAAO,4CAC3B1E,GAAW,YAAS0E,EAAAA,GAAAA,EAAO,uCAG/B,CAgCgCqB,CAAsBrE,GAE9CuD,EAAmB,CACfe,SAAS,EACThG,QAASuF,EACT7D,YAAaA,GAIjBuE,QAAQC,MAAM,gBAAQxB,EAAAA,GAAAA,EAAO,2BAA6B,KAC1DuB,QAAQE,IAAIV,GACZQ,QAAQG,MACJ1E,EAAYe,IAAI,SAAA+C,GAAE,OAAAa,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACb3B,EAAAA,GAAAA,EAAO,oBAAsBG,EAAcW,EAAGvD,QAC9CyC,EAAAA,GAAAA,EAAO,oBAAsBc,EAAGtB,OAChCQ,EAAAA,GAAAA,EAAO,qBAAuBc,EAAGpD,OAAOM,KAAK,MAAK,IAG3DuD,QAAQK,UACZ,CAEA,OAAOrB,CACX,E,sCC5HasB,EAAwC,SAAHC,GAA+D,IAAzDvH,EAASuH,EAATvH,UAAWwH,EAAQD,EAARC,SAAUC,EAAQF,EAARE,SAAUC,EAAkBH,EAAlBG,mBAC7EC,EAASC,MACfC,EAAkCC,EAAAA,SAAe7B,EAAAA,IAAuB8B,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAjEI,EAASF,EAAA,GAAEG,EAAYH,EAAA,GACtBxG,GAAMC,EAAAA,EAAAA,MAAND,EAOR4G,GAA6DC,EAAAA,EAAAA,IAAU,CACnEC,cAAAA,EAAAA,GACAZ,SAAU,SAACa,GACP,IAAMtC,EAAmBD,EAAcuC,GACvCJ,EAAalC,GACb0B,EAAmB1B,GAEfA,EAAiBe,SACjBU,EAASa,EAEjB,IAVIC,EAAMJ,EAANI,OAAQC,EAAYL,EAAZK,aAAcC,EAAaN,EAAbM,cAAeC,EAAWP,EAAXO,YAavCC,GAAcjH,EAAAA,EAAAA,aAAY,WAC5B,MAA0C,KAAnCkH,OAAOL,OAAOA,GAAQ9E,KAAK,GACtC,EAAG,CAAC8E,IAEEM,GAAyBnH,EAAAA,EAAAA,aAAY,WACvCwG,EAAajC,EAAAA,IACbyB,EAAmBzB,EAAAA,IACnByC,EAAY,KAChB,EAAG,CAACA,EAAahB,IAEjB,OACIoB,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA5G,SAAA,EACIN,EAAAA,EAAAA,KAACmH,EAAAA,GAAe,CAACC,cAAehB,EAAUlB,QAASmC,aAAcjB,EAAUlH,QAAS0B,YAAawF,EAAUxF,YAAa0G,QA9B7F,WAC/BjB,EAAajC,EAAAA,IACbyB,EAAmBzB,EAAAA,GACvB,KA4BQ6C,EAAAA,EAAAA,MAACM,EAAAA,GAAQ,CAACnF,GAAI0D,EAAOxF,SAAA,EACjBN,EAAAA,EAAAA,KAACwH,EAAAA,GAAY,CAAAlH,SACRyG,OAAOL,OAAOe,EAAAA,IAAiB9F,IAAI,SAACqC,GAA0B,OAC3DhE,EAAAA,EAAAA,KAACO,GAAW4B,EAAAA,EAAAA,GAAA,CAAiB1B,WAAYtC,EAAWuC,MAAOuD,EAAAA,GAA8BD,GAAYpD,YAAawF,EAAUxF,aAAiBgG,EAAc5C,IAAzIA,EAAuJ,MAGjLiD,EAAAA,EAAAA,MAACS,EAAAA,GAAa,CAAApH,SAAA,EACVN,EAAAA,EAAAA,KAACC,EAAAA,GAAM,CAAC0H,KAAM7B,EAAQ5F,SAAU/B,GAAa2I,MAAkBnB,EAAUtF,QAASsG,EAAuEvG,UAAU,aAAawH,KAAK,SAAQtH,SACxLZ,EAAE,8BAEPM,EAAAA,EAAAA,KAACC,EAAAA,GAAM,CAACC,SAAU/B,GAAa2I,IAAezG,QAAS2G,EAAwB5G,UAAU,kBAAkBwH,KAAK,QAAOtH,SAClHZ,EAAE,6BAEPM,EAAAA,EAAAA,KAAC6H,EAAc,YAKnC,E,UC9BA,EA9B0B,WACtB,IAAAC,GAAsBC,EAAAA,EAAAA,UAAS,IAAGC,GAAA7B,EAAAA,EAAAA,GAAA2B,EAAA,GAA3BG,EAAGD,EAAA,GAAEE,EAAMF,EAAA,GAEZ7J,GAAYgK,EAAAA,EAAAA,IAAYC,EAAAA,IACxBzC,GAAWwC,EAAAA,EAAAA,IAAYE,EAAAA,IACvBC,GAAoBC,EAAAA,EAAAA,MAEpBC,GAAmB3I,EAAAA,EAAAA,aAAY,SAAC4G,GAClCyB,ECTiB,SAAClF,GACtB,IAGMyF,EAAa,CAAEC,SAAU1F,EAAOL,QAASgG,QAAS3F,EAAOjB,MAAOc,QAASG,EAAOH,QAAS+F,QAAS5F,EAAO4F,SAS/G,MAZa,iDAKSC,IAAAA,KAClBA,IAAAA,QACAA,IAAAA,OAAU,SAAAnD,GAAS,MAAgB,MAAzBS,EAAAA,EAAAA,GAAAT,EAAA,GAAS,EAAkB,GACrCmD,IAAAA,IAAO,SAAAC,GAAA,IAAAC,GAAA5C,EAAAA,EAAAA,GAAA2C,EAAA,GAAE3F,EAAG4F,EAAA,GAAE3F,EAAK2F,EAAA,UAAMnH,IAAK,CAACuB,EAAKC,GAAQ,IAAI,GAChDyF,IAAAA,KAAQ,KAGEG,CAAcP,GAXR,iBAWoCQ,EAAAA,GAVpC,cAWxB,CDLeC,CAAUzC,GACrB,EAAG,IAEG0C,GAAyBtJ,EAAAA,EAAAA,aAAY,SAACuJ,GAAiC,EAAG,IAWhF,OATAC,EAAAA,EAAAA,WAAU,WACN,IAAMC,EAAa,IAAIC,gBAKvB,OAJItB,IACA9C,QAAQE,IAAI4C,GACZK,EAAkBL,EAAKqB,IAEpB,kBAAMA,EAAWE,OAAQ,CACpC,EAAG,CAACvB,EAAKK,KAGLrB,EAAAA,EAAAA,MAACwC,EAAAA,GAAa,CAACC,UAAU,EAAOC,gBAAc,EAACC,GAAI,CAAEC,WAAY,SAAUvJ,SAAA,EACvEN,EAAAA,EAAAA,KAAC8J,EAAAA,GAAW,KACZ9J,EAAAA,EAAAA,KAACyF,EAAU,CAACtH,UAAWA,EAAWwH,SAAUA,EAAUC,SAAU4C,EAAkB3C,mBAAoBsD,MAGlH,C","sources":["pages/SearchPage/components/FavoritesButton.tsx","store/thunks/thunkFetchFromFavorites.ts","pages/SearchPage/components/SearchField.tsx","pages/SearchPage/utils/searchFields.ts","pages/SearchPage/utils/validateInput.ts","pages/SearchPage/components/SearchForm.tsx","pages/SearchPage/SearchPage.tsx","pages/SearchPage/utils/createURL.ts"],"sourcesContent":["// import { connect } from \"react-redux\";\r\n// import { useCallback } from \"react\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n\r\n// import Paths from \"routing\";\r\n\r\n// import { Button } from \"components\";\r\n// import { useFavoriteBooks } from \"hooks\";\r\n// import { thunkFetchFromFavorites } from \"js/redux/thunks/thunkFetchFromFavorites\";\r\n// import { AppDispatch, RootStateType } from \"types\";\r\n\r\n// export interface Props {\r\n//     fetchFromFavorites: () => void;\r\n//     isLoading: RootStateType[\"loading\"][\"isLoading\"];\r\n// }\r\n\r\n// export function FavoritesButton(props: Props): JSX.Element {\r\n//     const navigate = useNavigate();\r\n//     const { fetchFromFavorites, isLoading } = props;\r\n//     const { favoriteBooks } = useFavoriteBooks();\r\n\r\n//     const processFavorites = useCallback(() => {\r\n//         fetchFromFavorites();\r\n//         navigate(Paths.books);\r\n//     }, [fetchFromFavorites, navigate]);\r\n\r\n//     return (\r\n//         <Button disabled={!favoriteBooks.areNotEmpty() || isLoading} className=\"button--favorites\" onClick={processFavorites}>\r\n//             Ulubione\r\n//         </Button>\r\n//     );\r\n// }\r\n\r\n// const mapDispatchToProps = (dispatch: AppDispatch) => ({\r\n//     fetchFromFavorites: () => dispatch(thunkFetchFromFavorites()),\r\n// });\r\n\r\n// const mapStateToProps = (state: RootStateType) => ({\r\n//     isLoading: state.loading.isLoading,\r\n// });\r\n\r\n// export default connect(mapStateToProps, mapDispatchToProps)(FavoritesButton);\r\nimport { connect } from \"react-redux\";\r\nimport { useCallback } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport Paths from \"routing\";\r\n\r\nimport { Button } from \"components\";\r\nimport { useFavoriteBooks } from \"hooks\";\r\nimport { thunkFetchFromFavorites } from \"store/thunks/thunkFetchFromFavorites\";\r\nimport { AppDispatch, RootStateType } from \"types\";\r\n\r\nexport interface Props {\r\n    fetchFromFavorites: () => void;\r\n    isLoading: RootStateType[\"loading\"][\"isLoading\"];\r\n}\r\n\r\nexport function FavoritesButton(props: Props): JSX.Element {\r\n    const navigate = useNavigate();\r\n    const { fetchFromFavorites, isLoading } = props;\r\n    const { favoriteBooks } = useFavoriteBooks();\r\n    const { t } = useTranslation();\r\n\r\n    const processFavorites = useCallback(() => {\r\n        fetchFromFavorites();\r\n        navigate(Paths.books);\r\n    }, [fetchFromFavorites, navigate]);\r\n\r\n    return (\r\n        <Button disabled={!favoriteBooks.areNotEmpty() || isLoading} className=\"button--favorites\" onClick={processFavorites}>\r\n            {t(\"actions.favorites\")}\r\n        </Button>\r\n    );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => ({\r\n    fetchFromFavorites: () => dispatch(thunkFetchFromFavorites()),\r\n});\r\n\r\nconst mapStateToProps = (state: RootStateType) => ({\r\n    isLoading: state.loading.isLoading,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FavoritesButton);\r\n","import { ThunkAction } from \"redux-thunk\";\r\nimport { AnyAction } from \"redux\";\r\n\r\nimport { RootStateType } from \"types\";\r\nimport { FilteredStorage } from \"utils\";\r\nimport { storeBooks, setIsFromNetwork, showError } from \"../actionCreators\";\r\nimport { FAVORITE_BOOK_IDENTIFIER } from \"config\";\r\n\r\nexport function thunkFetchFromFavorites(): ThunkAction<void, RootStateType, unknown, AnyAction> {\r\n    return dispatch => {\r\n        try {\r\n            const favorites = new FilteredStorage(item => item.kind === FAVORITE_BOOK_IDENTIFIER);\r\n            const booksRetrievedFromFavorites = favorites.getAll();\r\n            dispatch(storeBooks(booksRetrievedFromFavorites));\r\n            dispatch(setIsFromNetwork(false));\r\n        } catch (error) {\r\n            const errorMessage = error instanceof Error ? error.message : \"Podczas pr√≥by pobrania ulubionych wystƒÖpi≈Ç b≈ÇƒÖd\";\r\n            dispatch(\r\n                showError({\r\n                    isError: true,\r\n                    errorMessage: errorMessage,\r\n                })\r\n            );\r\n        }\r\n    };\r\n}\r\n","import TextField from \"@mui/material/TextField\";\r\nimport { FieldInputProps } from \"formik\";\r\nimport { memo, useMemo } from \"react\";\r\nimport { Tooltip } from \"components\";\r\nimport { FieldValidationError } from \"../utils/model\";\r\n\r\nexport interface SearchFieldProps extends FieldInputProps<string> {\r\n    label: string;\r\n    isDisabled: boolean;\r\n    fieldErrors?: FieldValidationError[];\r\n}\r\n\r\nconst SearchField = memo((props: SearchFieldProps): JSX.Element => {\r\n    const { isDisabled, label, name, fieldErrors, ...otherProps } = props;\r\n\r\n    // Find errors specific to this field\r\n    const currentFieldErrors = useMemo(() => {\r\n        return fieldErrors?.find(error => error.field === name);\r\n    }, [fieldErrors, name]);\r\n\r\n    const hasErrors = Boolean(currentFieldErrors && currentFieldErrors.errors.length > 0);\r\n\r\n    // Create detailed tooltip content\r\n    const tooltipContent = useMemo(() => {\r\n        let content = \"Wymagania:\\n‚Ä¢ Minimum 2 znaki\\n‚Ä¢ Co najmniej jedna litera lub cyfra\\n‚Ä¢ Bez spacji na poczƒÖtku i ko≈Ñcu\";\r\n\r\n        if (hasErrors) {\r\n            content += `\\n\\nB≈Çƒôdy w tym polu:\\n${currentFieldErrors!.errors.map(error => `‚Ä¢ ${error}`).join(\"\\n\")}`;\r\n        }\r\n\r\n        return content;\r\n    }, [hasErrors, currentFieldErrors]);\r\n\r\n    // No helper text - we only show errors in the ValidationAlert\r\n\r\n    return (\r\n        <Tooltip role=\"tooltip\" title={tooltipContent} placement=\"top\" arrow>\r\n            <TextField disabled={isDisabled} aria-label={`input field for ${name} field`} label={label} id={name} size=\"small\" variant=\"outlined\" {...otherProps} />\r\n        </Tooltip>\r\n    );\r\n});\r\n\r\nSearchField.displayName = \"SearchField\";\r\n\r\nexport default SearchField;\r\n","import { SearchableFields } from \"types\";\r\n\r\nexport enum Placeholders {\r\n    authors = \"Autor\",\r\n    title = \"Tytu≈Ç\",\r\n    subject = \"Etykiety\",\r\n}\r\ninterface SearchField {\r\n    name: SearchableFields;\r\n    placeholder: string;\r\n}\r\n\r\nexport const initialSearchFields: Array<SearchField> = [\r\n    { name: SearchableFields.authors, placeholder: Placeholders.authors },\r\n    { name: SearchableFields.title, placeholder: Placeholders.title },\r\n    { name: SearchableFields.subject, placeholder: Placeholders.subject },\r\n];\r\nclass SearchFields {\r\n    fields: Array<SearchField>;\r\n    constructor(fields: Array<SearchField>) {\r\n        this.fields = fields;\r\n    }\r\n    getPlaceholder(str: string) {\r\n        const field: SearchField = this.fields.filter((item: SearchField) => item.name === str)[0];\r\n\r\n        return field.placeholder;\r\n    }\r\n\r\n    get getSearchFieldsWithInitialValues() {\r\n        const result: { [key: string]: string } = {};\r\n        for (let obj in this.fields) {\r\n            result[this.fields[obj].name] = \"\";\r\n        }\r\n        return result;\r\n    }\r\n    get getFields() {\r\n        return this.fields;\r\n    }\r\n}\r\nconst searchFields = new SearchFields(initialSearchFields);\r\n\r\nexport default searchFields;\r\n","import pickBy from \"lodash/pickBy\";\r\nimport isEmpty from \"lodash/isEmpty\";\r\nimport i18n from \"i18next\";\r\nimport { initialValidationState, SearchFormValues, FieldValidationError, SearchPageField, searchPageFieldPlaceholderMap } from \"./model\";\r\nimport { SearchableFields } from \"types\";\r\n\r\ninterface ValidationResult {\r\n    isValid: boolean;\r\n    message: string;\r\n    fieldErrors?: FieldValidationError[];\r\n}\r\n\r\n/**\r\n * Validates individual field value and returns detailed error information\r\n * @param value - field value to validate\r\n * @returns array of specific validation errors\r\n */\r\nconst validateFieldValue = (value: string): string[] => {\r\n    const errors: string[] = [];\r\n\r\n    if (value.length === 0) {\r\n        return errors; // Empty fields are allowed, skip validation\r\n    }\r\n\r\n    if (value.length === 1) {\r\n        errors.push(i18n.t(\"validation.errorMessages.minLength\"));\r\n    }\r\n\r\n    if (!/[A-Za-z0-9]/.test(value)) {\r\n        errors.push(i18n.t(\"validation.errorMessages.alphanumeric\"));\r\n    }\r\n\r\n    if (value.trim() !== value) {\r\n        errors.push(i18n.t(\"validation.errorMessages.noSpaces\"));\r\n    }\r\n\r\n    if (/^\\s*$/.test(value) && value.length > 0) {\r\n        errors.push(i18n.t(\"validation.errorMessages.onlyWhitespace\"));\r\n    }\r\n\r\n    // Check for potentially problematic characters\r\n    if (/[<>{}[\\]\\\\]/.test(value)) {\r\n        errors.push(i18n.t(\"validation.errorMessages.specialChars\"));\r\n    }\r\n\r\n    return errors;\r\n};\r\n\r\n/**\r\n * Get field label for display purposes\r\n * @param fieldName - field name from SearchPageField\r\n * @returns human-readable field label\r\n */\r\nconst getFieldLabel = (fieldName: string): string => {\r\n    return searchPageFieldPlaceholderMap[fieldName as SearchPageField] || fieldName;\r\n};\r\n\r\n/**\r\n * Creates detailed validation message based on field errors\r\n * @param fieldErrors - array of field validation errors\r\n * @returns formatted error message\r\n */\r\nconst createDetailedMessage = (fieldErrors: FieldValidationError[]): string => {\r\n    if (fieldErrors.length === 0) return \"\";\r\n\r\n    let message = i18n.t(\"validation.title\") + \":\\n\";\r\n\r\n    fieldErrors.forEach((fieldError, index) => {\r\n        const fieldLabel = getFieldLabel(fieldError.field);\r\n        message += `\\n${index + 1}. ${i18n.t(\"validation.field\")} \"${fieldLabel}\"`;\r\n\r\n        if (fieldError.value.length > 20) {\r\n            message += ` (${i18n.t(\"validation.value\")}: \"${fieldError.value.substring(0, 20)}...\")`;\r\n        } else {\r\n            message += ` (${i18n.t(\"validation.value\")}: \"${fieldError.value}\")`;\r\n        }\r\n\r\n        fieldError.errors.forEach((error /*, errorIndex*/) => {\r\n            message += `\\n   ‚Ä¢ ${error}`;\r\n        });\r\n    });\r\n\r\n    message += \"\\n\\n\" + i18n.t(\"validation.requirements\") + \":\";\r\n    message += \"\\n‚Ä¢ \" + i18n.t(\"validation.ruleDescriptions.minLength\");\r\n    message += \"\\n‚Ä¢ \" + i18n.t(\"validation.ruleDescriptions.alphanumeric\");\r\n    message += \"\\n‚Ä¢ \" + i18n.t(\"validation.ruleDescriptions.noSpaces\");\r\n\r\n    return message;\r\n};\r\n\r\n/**\r\n * validates input fields content with detailed error reporting.\r\n * @param fields -  object with keys and values that further forms part of that link\r\n * @returns object with validation result, error message, and detailed field errors\r\n */\r\nexport const validateInput = (fields: SearchFormValues): ValidationResult => {\r\n    let validationResult: ValidationResult = { ...initialValidationState };\r\n    const fieldErrors: FieldValidationError[] = [];\r\n\r\n    const nonEmptyFields: { [index in SearchableFields as string]: string } = pickBy(fields);\r\n\r\n    if (!isEmpty(nonEmptyFields)) {\r\n        for (const key in nonEmptyFields) {\r\n            const fieldValue = nonEmptyFields[key];\r\n            const errors = validateFieldValue(fieldValue);\r\n\r\n            if (errors.length > 0) {\r\n                fieldErrors.push({\r\n                    field: key,\r\n                    value: fieldValue,\r\n                    errors: errors,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    if (fieldErrors.length > 0) {\r\n        const simpleMessage = i18n.t(\"validation.invalidFields\", {\r\n            fields: fieldErrors.map(fe => getFieldLabel(fe.field)).join(\", \"),\r\n        });\r\n        const detailedMessage = createDetailedMessage(fieldErrors);\r\n\r\n        validationResult = {\r\n            isValid: false,\r\n            message: simpleMessage,\r\n            fieldErrors: fieldErrors,\r\n        };\r\n\r\n        // Log detailed message to console for debugging\r\n        console.group(\"üîç \" + i18n.t(\"validation.errorDetails\") + \":\");\r\n        console.log(detailedMessage);\r\n        console.table(\r\n            fieldErrors.map(fe => ({\r\n                [i18n.t(\"validation.field\")]: getFieldLabel(fe.field),\r\n                [i18n.t(\"validation.value\")]: fe.value,\r\n                [i18n.t(\"validation.errors\")]: fe.errors.join(\"; \"),\r\n            }))\r\n        );\r\n        console.groupEnd();\r\n    }\r\n\r\n    return validationResult;\r\n};\r\n","import React, { useCallback } from \"react\";\r\nimport { useFormik } from \"formik\";\r\nimport uuid from \"react-uuid\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { Button, ValidationAlert } from \"components\";\r\nimport { BookForm, SearchButtons, SearchInputs } from \"pages/styled\";\r\nimport { SearchField, FavoriteButton } from \"./\";\r\nimport { SearchFormValues, SearchPageField, searchPageFieldPlaceholderMap, initialValues, initialValidationState, ValidationState } from \"../utils/model\";\r\nimport { validateInput } from \"../utils\";\r\n\r\ninterface SearchFormProps {\r\n    isLoading: boolean;\r\n    isOnline: boolean;\r\n    onSubmit: (values: SearchFormValues) => void;\r\n    onValidationChange: (validation: ValidationState) => void;\r\n}\r\n\r\nexport const SearchForm: React.FC<SearchFormProps> = ({ isLoading, isOnline, onSubmit, onValidationChange }) => {\r\n    const formID = uuid();\r\n    const [validated, setValidated] = React.useState(initialValidationState);\r\n    const { t } = useTranslation();\r\n\r\n    const handleCloseValidationAlert = () => {\r\n        setValidated(initialValidationState);\r\n        onValidationChange(initialValidationState);\r\n    };\r\n\r\n    const { values, handleSubmit, getFieldProps, handleReset } = useFormik({\r\n        initialValues,\r\n        onSubmit: (formValues: SearchFormValues) => {\r\n            const validationResult = validateInput(formValues);\r\n            setValidated(validationResult);\r\n            onValidationChange(validationResult);\r\n\r\n            if (validationResult.isValid) {\r\n                onSubmit(formValues);\r\n            }\r\n        },\r\n    });\r\n\r\n    const isFormEmpty = useCallback(() => {\r\n        return Object.values(values).join(\"\") === \"\";\r\n    }, [values]);\r\n\r\n    const clearFormAndValidation = useCallback(() => {\r\n        setValidated(initialValidationState);\r\n        onValidationChange(initialValidationState);\r\n        handleReset(null);\r\n    }, [handleReset, onValidationChange]);\r\n\r\n    return (\r\n        <>\r\n            <ValidationAlert shouldRender={!validated.isValid} alertMessage={validated.message} fieldErrors={validated.fieldErrors} onClose={handleCloseValidationAlert} />\r\n            <BookForm id={formID}>\r\n                <SearchInputs>\r\n                    {Object.values(SearchPageField).map((fieldName: SearchPageField) => (\r\n                        <SearchField key={fieldName} isDisabled={isLoading} label={searchPageFieldPlaceholderMap[fieldName]} fieldErrors={validated.fieldErrors} {...getFieldProps(fieldName)} />\r\n                    ))}\r\n                </SearchInputs>\r\n                <SearchButtons>\r\n                    <Button form={formID} disabled={isLoading || isFormEmpty() || !isOnline} onClick={handleSubmit as unknown as React.MouseEventHandler<HTMLButtonElement>} className=\"button--ok\" type=\"submit\">\r\n                        {t(\"searchPage.searchButton\")}\r\n                    </Button>\r\n                    <Button disabled={isLoading || isFormEmpty()} onClick={clearFormAndValidation} className=\"button--problem\" type=\"reset\">\r\n                        {t(\"searchPage.clearButton\")}\r\n                    </Button>\r\n                    <FavoriteButton />\r\n                </SearchButtons>\r\n            </BookForm>\r\n        </>\r\n    );\r\n};\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { SearchForm } from \"./components/SearchForm\";\r\nimport { createURL } from \"./utils\";\r\nimport { LogoFactory } from \"components\";\r\n\r\nimport { PageContainer } from \"pages/styled\";\r\nimport { SearchFormValues, ValidationState } from \"./utils/model\";\r\nimport { isOnlineSelector, isLoadingSelector } from \"store/selectors\";\r\nimport { useFetchBooks } from \"hooks\";\r\n\r\nexport const SearchPage = () => {\r\n    const [URL, setURL] = useState(\"\");\r\n\r\n    const isLoading = useSelector(isLoadingSelector);\r\n    const isOnline = useSelector(isOnlineSelector);\r\n    const fetchBooksFromAPI = useFetchBooks();\r\n\r\n    const handleFormSubmit = useCallback((formValues: SearchFormValues) => {\r\n        setURL(createURL(formValues));\r\n    }, []);\r\n\r\n    const handleValidationChange = useCallback((validation: ValidationState) => {}, []);\r\n\r\n    useEffect(() => {\r\n        const controller = new AbortController();\r\n        if (URL) {\r\n            console.log(URL); // for testing purposes, remove before production\r\n            fetchBooksFromAPI(URL, controller);\r\n        }\r\n        return () => controller.abort();\r\n    }, [URL, fetchBooksFromAPI]);\r\n\r\n    return (\r\n        <PageContainer maxWidth={false} disableGutters sx={{ alignItems: \"unset\" }}>\r\n            <LogoFactory />\r\n            <SearchForm isLoading={isLoading} isOnline={isOnline} onSubmit={handleFormSubmit} onValidationChange={handleValidationChange} />\r\n        </PageContainer>\r\n    );\r\n};\r\n\r\nexport default SearchPage;\r\n","import fp from \"lodash/fp\";\r\nimport join from \"lodash/join\";\r\nimport { SearchFormValues } from \"./model\";\r\nimport { BOOK_FIELDS } from \"config\";\r\n\r\n/**\r\n * builds full GoogleBooks API search link for certain book\r\n * @param searchKeys -  object with keys that further forms part of that link\r\n * @returns GoogleBooks API search link for certain book\r\n */\r\n\r\nexport const createURL = (fields: SearchFormValues): string => {\r\n    const PATH = \"https://www.googleapis.com/books/v1/volumes?q=\";\r\n    const MAX_RESULTS = \"&maxResults=40\";\r\n    const START_INDEX = \"&startIndex=\";\r\n    const searchKeys = { inauthor: fields.authors, intitle: fields.title, subject: fields.subject, keyword: fields.keyword };\r\n\r\n    const stringifyKeys = fp.flow(\r\n        fp.toPairs,\r\n        fp.filter(([, value]) => value !== \"\"),\r\n        fp.map(([key, value]) => join([key, value], \":\")),\r\n        fp.join(\"+\")\r\n    );\r\n\r\n    return PATH + stringifyKeys(searchKeys) + MAX_RESULTS + BOOK_FIELDS + START_INDEX;\r\n};\r\n"],"names":["connect","state","isLoading","loading","dispatch","fetchFromFavorites","booksRetrievedFromFavorites","FilteredStorage","item","kind","FAVORITE_BOOK_IDENTIFIER","getAll","storeBooks","setIsFromNetwork","error","errorMessage","Error","message","showError","isError","props","navigate","useNavigate","favoriteBooks","useFavoriteBooks","t","useTranslation","processFavorites","useCallback","Paths","books","_jsx","Button","disabled","areNotEmpty","className","onClick","children","SearchField","memo","isDisabled","label","name","fieldErrors","otherProps","_objectWithoutProperties","_excluded","currentFieldErrors","useMemo","find","field","hasErrors","Boolean","errors","length","tooltipContent","content","concat","map","join","Tooltip","role","title","placement","arrow","TextField","_objectSpread","id","size","variant","displayName","Placeholders","initialSearchFields","SearchableFields","authors","placeholder","subject","_createClass","SearchFields","fields","_classCallCheck","this","key","value","str","filter","get","result","obj","validateFieldValue","push","i18n","test","trim","getFieldLabel","fieldName","searchPageFieldPlaceholderMap","validateInput","validationResult","initialValidationState","nonEmptyFields","pickBy","isEmpty","fieldValue","simpleMessage","fe","detailedMessage","forEach","fieldError","index","fieldLabel","substring","createDetailedMessage","isValid","console","group","log","table","_defineProperty","groupEnd","SearchForm","_ref","isOnline","onSubmit","onValidationChange","formID","uuid","_React$useState","React","_React$useState2","_slicedToArray","validated","setValidated","_useFormik","useFormik","initialValues","formValues","values","handleSubmit","getFieldProps","handleReset","isFormEmpty","Object","clearFormAndValidation","_jsxs","_Fragment","ValidationAlert","shouldRender","alertMessage","onClose","BookForm","SearchInputs","SearchPageField","SearchButtons","form","type","FavoriteButton","_useState","useState","_useState2","URL","setURL","useSelector","isLoadingSelector","isOnlineSelector","fetchBooksFromAPI","useFetchBooks","handleFormSubmit","searchKeys","inauthor","intitle","keyword","fp","_ref3","_ref4","stringifyKeys","BOOK_FIELDS","createURL","handleValidationChange","validation","useEffect","controller","AbortController","abort","PageContainer","maxWidth","disableGutters","sx","alignItems","LogoFactory"],"sourceRoot":""}