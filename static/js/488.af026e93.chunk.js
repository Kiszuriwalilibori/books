"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[488],{7488:function(n,e,i){i.r(e),i.d(e,{default:function(){return _}});var t=i(5544),r=i(5043),a=i(2166),o=i(8641),s=i(9379),l=i(3892),u=i(8222),c=i.n(u),d=i(7063),f=i(2606),h=i(3216),m=i(7861),b=i(6278),p=i(744),j=i(8049),v=i(4558);var g=i(579);var k=(0,a.Ng)(function(n){return{isLoading:n.loading.isLoading}},function(n){return{fetchFromFavorites:function(){return n(function(n){try{var e=new p.v_(function(n){return n.kind===v.XI}).getAll();n((0,j.storeBooks)(e)),n((0,j.setIsFromNetwork)(!1))}catch(t){var i=t instanceof Error?t.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";n((0,j.showError)({isError:!0,errorMessage:i}))}})}}})(function(n){var e=(0,h.Zp)(),i=n.fetchFromFavorites,t=n.isLoading,a=(0,b.cs)().favoriteBooks,o=(0,r.useCallback)(function(){i(),e(m.A.books)},[i,e]);return(0,g.jsx)(d.$n,{disabled:!a.areNotEmpty()||t,className:"button--favorites",onClick:o,children:"Ulubione"})}),y=i(45),w=i(8623),z=["isDisabled","label","name","fieldErrors"],x=(0,r.memo)(function(n){var e=n.isDisabled,i=n.label,t=n.name,a=n.fieldErrors,o=(0,y.A)(n,z),l=(0,r.useMemo)(function(){return null===a||void 0===a?void 0:a.find(function(n){return n.field===t})},[a,t]),u=Boolean(l&&l.errors.length>0),c=(0,r.useMemo)(function(){var n="Wymagania:\n\u2022 Minimum 2 znaki\n\u2022 Co najmniej jedna litera lub cyfra\n\u2022 Bez spacji na pocz\u0105tku i ko\u0144cu";return u&&(n+="\n\nB\u0142\u0119dy w tym polu:\n".concat(l.errors.map(function(n){return"\u2022 ".concat(n)}).join("\n"))),n},[u,l]);return(0,g.jsx)(d.m_,{role:"tooltip",title:c,placement:"top",arrow:!0,children:(0,g.jsx)(w.A,(0,s.A)({disabled:e,"aria-label":"input field for ".concat(t," field"),label:i,id:t,size:"small",variant:"outlined"},o))})});x.displayName="SearchField";var C=x,A=i(3698),E=i(3029),N=i(2901),S=i(6892),F=function(n){return n.authors="Autor",n.title="Tytu\u0142",n.subject="Etykiety",n}({}),L=[{name:S.C.authors,placeholder:F.authors},{name:S.C.title,placeholder:F.title},{name:S.C.subject,placeholder:F.subject}],M=(new(function(){return(0,N.A)(function n(e){(0,E.A)(this,n),this.fields=void 0,this.fields=e},[{key:"getPlaceholder",value:function(n){return this.fields.filter(function(e){return e.name===n})[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var n={};for(var e in this.fields)n[this.fields[e].name]="";return n}},{key:"getFields",get:function(){return this.fields}}])}())(L),i(7273)),B=i.n(M),P=i(4320),T=i.n(P),W=function(n){var e=[];return 0===n.length||(1===n.length&&e.push("musi zawiera\u0107 co najmniej 2 znaki"),/[A-Za-z0-9]/.test(n)||e.push("musi zawiera\u0107 co najmniej jeden znak alfanumeryczny (litera lub cyfra)"),n.trim()!==n&&e.push("nie mo\u017ce zaczyna\u0107 si\u0119 ani ko\u0144czy\u0107 spacj\u0105"),/^\s*$/.test(n)&&n.length>0&&e.push("nie mo\u017ce sk\u0142ada\u0107 si\u0119 tylko z bia\u0142ych znak\xf3w"),/[<>{}[\]\\]/.test(n)&&e.push("zawiera niedozwolone znaki specjalne")),e},V=function(n){return A.Pu[n]||n},I=function(n){var e=(0,s.A)({},A.T9),i=[],t=B()(n);if(!T()(t))for(var r in t){var a=t[r],o=W(a);o.length>0&&i.push({field:r,value:a,errors:o})}if(i.length>0){var l="Nieprawid\u0142owe warto\u015bci w polach: ".concat(i.map(function(n){return V(n.field)}).join(", ")),u=function(n){if(0===n.length)return"";var e="B\u0142\u0119dy walidacji:\n";return n.forEach(function(n,i){var t=V(n.field);e+="\n".concat(i+1,'. Pole "').concat(t,'"'),n.value.length>20?e+=' (warto\u015b\u0107: "'.concat(n.value.substring(0,20),'...")'):e+=' (warto\u015b\u0107: "'.concat(n.value,'")'),n.errors.forEach(function(n,i){e+="\n   \u2022 ".concat(n)})}),e+="\n\nWymagania dla wszystkich p\xf3l:",e+="\n\u2022 Minimum 2 znaki",e+="\n\u2022 Co najmniej jedna litera lub cyfra",e+="\n\u2022 Bez spacji na pocz\u0105tku i ko\u0144cu"}(i);e={isValid:!1,message:l,fieldErrors:i},console.group("\ud83d\udd0d Szczeg\xf3\u0142y b\u0142\u0119d\xf3w walidacji:"),console.log(u),console.table(i.map(function(n){return{Pole:V(n.field),"Warto\u015b\u0107":n.value,"B\u0142\u0119dy":n.errors.join("; ")}})),console.groupEnd()}return e},O=i(3555),D=i.n(O),$=i(6665),R=i.n($),X=function(n){var e=n.isLoading,i=n.isOnline,a=n.onSubmit,o=n.onValidationChange,u=c()(),h=r.useState(A.T9),m=(0,t.A)(h,2),b=m[0],p=m[1],j=(0,l.Wx)({initialValues:A.LX,onSubmit:function(n){var e=I(n);p(e),o(e),e.isValid&&a(n)}}),v=j.values,y=j.handleSubmit,w=j.getFieldProps,z=j.handleReset,x=(0,r.useCallback)(function(){return""===Object.values(v).join("")},[v]),E=(0,r.useCallback)(function(){p(A.T9),o(A.T9),z(null)},[z,o]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.am,{shouldRender:!b.isValid,alertMessage:b.message,fieldErrors:b.fieldErrors,onClose:function(){p(A.T9),o(A.T9)}}),(0,g.jsxs)(f.kW,{id:u,children:[(0,g.jsx)(f.OM,{children:Object.values(A.y7).map(function(n){return(0,g.jsx)(C,(0,s.A)({isDisabled:e,label:A.Pu[n],fieldErrors:b.fieldErrors},w(n)),n)})}),(0,g.jsxs)(f.aL,{children:[(0,g.jsx)(d.$n,{form:u,disabled:e||x()||!i,onClick:y,className:"button--ok",type:"submit",children:"Szukaj"}),(0,g.jsx)(d.$n,{disabled:e||x(),onClick:E,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,g.jsx)(k,{})]})]})]})},Z=i(2442),_=function(){var n=(0,r.useState)(A.T9),e=(0,t.A)(n,2),i=(e[0],e[1]),s=(0,r.useState)(""),l=(0,t.A)(s,2),u=l[0],c=l[1],h=(0,o.N)(function(n){return n.loading.isLoading},a.bN),m=(0,a.d4)(Z.tp),p=(0,b.m5)(),j=(0,r.useCallback)(function(n){c(function(n){var e={inauthor:n.authors,intitle:n.title,subject:n.subject,keyword:n.keyword};return"https://www.googleapis.com/books/v1/volumes?q="+D().flow(D().toPairs,D().filter(function(n){return""!==(0,t.A)(n,2)[1]}),D().map(function(n){var e=(0,t.A)(n,2),i=e[0],r=e[1];return R()([i,r],":")}),D().join("+"))(e)+"&maxResults=40"+v.MD+"&startIndex="}(n))},[]),k=(0,r.useCallback)(function(n){i(n)},[]);return(0,r.useEffect)(function(){var n=new AbortController;return u&&(console.log(u),p(u,n)),function(){return n.abort()}},[u,p]),(0,g.jsxs)(f.LN,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,g.jsx)(d.M9,{}),(0,g.jsx)(X,{isLoading:h,isOnline:m,onSubmit:j,onValidationChange:k})]})}}}]);
//# sourceMappingURL=488.af026e93.chunk.js.map