"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[885],{4885:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var i=n(1413),r=n(9439),s=n(2791),a=n(6666),o=n.n(a),l=n(364),u=n(2506),c=n(7689),d=n(3739),f=n(5552),h=n(7161),b=n(7432),m=n(4467),v=n(9478);var j=n(3329);var g=(0,l.$j)((function(e){return{isLoading:e.loading.isLoading}}),(function(e){return{fetchFromFavorites:function(){return e((function(e){try{var t=new b.X4((function(e){return e.kind===v.Zg})).getAll();e((0,m.storeBooks)(t)),e((0,m.setIsFromNetwork)(!1))}catch(i){var n=i instanceof Error?i.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";e((0,m.showError)({isError:!0,errorMessage:n}))}}))}}}))((function(e){var t=(0,c.s0)(),n=e.fetchFromFavorites,i=e.isLoading,r=(0,h.wR)().favoriteBooks;return(0,j.jsx)(f.zx,{disabled:!r.areNotEmpty()||i,className:"button--favorites",onClick:function(){n(),t(d.Z.books)},children:"Ulubione"})})),p=n(5987),w=n(65),k=["isDisabled","label","name"];function x(e){e.target.focus()}var y,Z=function(e){var t=e.isDisabled,n=e.label,r=e.name,s=(0,p.Z)(e,k);return(0,j.jsx)(f.u,{role:"tooltip",title:"Nie mniej ni\u017c dwa znaki w tym jeden alfanumeryczny",placement:"top",children:(0,j.jsx)(w.Z,(0,i.Z)({disabled:t,"aria-label":"input field for ".concat(r," field"),label:n,id:r,size:"small",variant:"outlined",onMouseEnter:x},s))})},T=n(871),E=n.n(T),S=n(2809),z=n.n(S),C=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+E().flow(E().toPairs,E().filter((function(e){return!(""===e[1])})),E().map((function(e){return z()(e,":")})),E().join("+"))(t)+"&maxResults=40"+v._M+"&startIndex="},A=n(5671),F=n(3144),R=n(9714);!function(e){e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety"}(y||(y={}));var N,U,I,L=[{name:R.a.authors,placeholder:y.authors},{name:R.a.title,placeholder:y.title},{name:R.a.subject,placeholder:y.subject}],V=new(function(){function e(t){(0,A.Z)(this,e),this.fields=void 0,this.fields=t}return(0,F.Z)(e,[{key:"getPlaceholder",value:function(e){return this.fields.filter((function(t){return t.name===e}))[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var t in this.fields)e[this.fields[t].name]="";return e}},{key:"getFields",get:function(){return this.fields}}]),e}())(L),P=n(7790),_=n.n(P),B=n(6364),O=n.n(B),W=n(4942);!function(e){e.AUTHORS="authors",e.TITLE="title",e.SUBJECT="subject"}(I||(I={}));var J=(N={},(0,W.Z)(N,I.AUTHORS,"Autor"),(0,W.Z)(N,I.TITLE,"Tytu\u0142"),(0,W.Z)(N,I.SUBJECT,"Etykiety"),N),M=(U={},(0,W.Z)(U,I.AUTHORS,""),(0,W.Z)(U,I.TITLE,""),(0,W.Z)(U,I.SUBJECT,""),U),D={isValid:!0,message:""},H=function(e){var t,n=D,i=[],r=_()(e);if(!O()(r))for(var s in r)if(!1===((t=r[s]).length>=2&&/\d|[A-z]/.test(t))){var a=V.getPlaceholder(s);n={isValid:!1,message:"Nieprawid\u0142owe dane w polu "+a},i.push(a)}return!1===n.isValid&&(n.message="Nieprawid\u0142owe warto\u015bci w polach: "+i.join(", ")),n},q=n(2465),G=n(7014),X=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+E().flow(E().toPairs,E().filter((function(e){return!(""===e[1])})),E().map((function(e){return z()(e,":")})),E().join("+"))(t)+"&maxResults=1"},Y=function(){var e=s.useState(D),t=(0,r.Z)(e,2),n=t[0],a=t[1],c=s.useState(""),d=(0,r.Z)(c,2),b=d[0],m=d[1],v=s.useState(""),p=(0,r.Z)(v,2),w=p[0],k=p[1],x=(0,h.ix)((function(e){return e.loading.isLoading}),l.wU),y=(0,l.v9)(G.YW),T=(0,h.gb)(),E=(0,u.TA)({initialValues:M,onSubmit:function(e){var t=H(e);a(t),t.isValid&&(m(C(e)),k(X(e)))}}),S=E.values,z=E.handleSubmit,A=E.getFieldProps,F=E.handleReset,R=s.useCallback((function(){return""===Object.values(S).join("")}),[S]),N=s.useCallback((function(){a(D),F(null)}),[]);return s.useEffect((function(){var e=new AbortController;return w&&b&&T(w,b,e),function(){return null===e||void 0===e?void 0:e.abort()}}),[w,b]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(q._z,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,j.jsx)(f.sF,{}),(0,j.jsx)(f.bZ,{shouldRender:!n.isValid,alertMessage:n.message}),(0,j.jsxs)(q.tW,{id:"search__form",children:[(0,j.jsx)(q.A4,{children:Object.values(I).map((function(e){return(0,j.jsx)(Z,(0,i.Z)({isDisabled:x,label:J[e]},A(e)),o()())}))}),(0,j.jsxs)(q.RJ,{children:[(0,j.jsx)(f.zx,{form:"search__form",disabled:x||R()||!y,onClick:z,className:"button--ok",type:"submit",children:"Szukaj"}),(0,j.jsx)(f.zx,{disabled:x||R(),onClick:N,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,j.jsx)(g,{})]})]})]})})}}}]);
//# sourceMappingURL=885.e3530a18.chunk.js.map