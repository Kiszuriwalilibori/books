"use strict";(self.webpackChunkgoogle_books_finder=self.webpackChunkgoogle_books_finder||[]).push([[858],{2858:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie}});var r=n(1413),i=n(9439),s=n(2791),o=n(6666),a=n.n(o),l=n(364),u=n(2506),c=n(1573),d=n(7689),f=n(8869),h=n(5552),b=n(198),m=n(4706),g=n(4467),v=n(9478);var p=n(3329);var j=(0,l.$j)((function(e){return{isLoading:e.loading.isLoading}}),(function(e){return{fetchFromFavorites:function(){return e((function(e){try{var t=new m.X4((function(e){return e.kind===v.Zg})).getAll();e((0,g.storeBooks)(t)),e((0,g.setIsFromNetwork)(!1))}catch(r){var n=r instanceof Error?r.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";e((0,g.showError)({isError:!0,errorMessage:n}))}}))}}}))((function(e){var t=(0,d.s0)(),n=e.fetchFromFavorites,r=e.isLoading,i=(0,b.wR)().favoriteBooks;return(0,p.jsx)(h.zx,{disabled:!i.areNotEmpty()||r,className:"button--favorites",onClick:function(){n(),t(f.Z.books)},children:"Ulubione"})})),k=n(5987),w=n(65),x=["isDisabled","label","name"];function y(e){e.target.focus()}var Z,E=function(e){var t=e.isDisabled,n=e.label,i=e.name,s=(0,k.Z)(e,x);return(0,p.jsx)(h.u,{role:"tooltip",title:"Nie mniej ni\u017c dwa znaki w tym jeden alfanumeryczny",placement:"top",children:(0,p.jsx)(w.Z,(0,r.Z)({disabled:t,"aria-label":"input field for ".concat(i," field"),label:n,id:i,size:"small",variant:"outlined",onMouseEnter:y},s))})},T=n(871),z=n.n(T),S=n(2809),A=n.n(S),C=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+z().flow(z().toPairs,z().filter((function(e){return!(""===e[1])})),z().map((function(e){return A()(e,":")})),z().join("+"))(t)+"&maxResults=40"+v._M+"&startIndex="},N=n(5671),F=n(3144),_=n(9714);!function(e){e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety"}(Z||(Z={}));var I,R,U,L=[{name:_.a.authors,placeholder:Z.authors},{name:_.a.title,placeholder:Z.title},{name:_.a.subject,placeholder:Z.subject}],M=new(function(){function e(t){(0,N.Z)(this,e),this.fields=void 0,this.fields=t}return(0,F.Z)(e,[{key:"getPlaceholder",value:function(e){return this.fields.filter((function(t){return t.name===e}))[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var t in this.fields)e[this.fields[t].name]="";return e}},{key:"getFields",get:function(){return this.fields}}]),e}())(L),V=n(7790),P=n.n(V),B=n(6364),O=n.n(B),W=n(4942);!function(e){e.AUTHORS="authors",e.TITLE="title",e.SUBJECT="subject"}(U||(U={}));var J=(I={},(0,W.Z)(I,U.AUTHORS,"Autor"),(0,W.Z)(I,U.TITLE,"Tytu\u0142"),(0,W.Z)(I,U.SUBJECT,"Etykiety"),I),D=(R={},(0,W.Z)(R,U.AUTHORS,""),(0,W.Z)(R,U.TITLE,""),(0,W.Z)(R,U.SUBJECT,""),R),H={isValid:!0,message:""},q=function(e){var t,n=H,r=[],i=P()(e);if(!O()(i))for(var s in i)if(!1===((t=i[s]).length>=2&&/\d|[A-z]/.test(t))){var o=M.getPlaceholder(s);n={isValid:!1,message:"Nieprawid\u0142owe dane w polu "+o},r.push(o)}return!1===n.isValid&&(n.message="Nieprawid\u0142owe warto\u015bci w polach: "+r.join(", ")),n},G=n(5374),X=n(2465),Y=n(7014),$=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+z().flow(z().toPairs,z().filter((function(e){return!(""===e[1])})),z().map((function(e){return A()(e,":")})),z().join("+"))(t)},K=n(5861),Q=n(4687),ee=n.n(Q),te=n(9689),ne=n(6333),re={isError:!1,errorMessage:"",data:[]},ie=function(){var e=s.useState(H),t=(0,i.Z)(e,2),n=t[0],o=t[1],b=s.useState(""),g=(0,i.Z)(b,2),v=g[0],k=g[1],w=s.useState(""),x=(0,i.Z)(w,2),y=(x[0],x[1]),Z=(0,c.i)((function(e){return e.loading.isLoading}),l.wU),T=(0,l.v9)(Y.YW),z=(0,G.l)(),S=(function(){(0,ne.Z)();var e=(0,te.Z)().showError,t=re,n=(0,d.s0)();function r(){return(r=(0,K.Z)(ee().mark((function r(i,s){var o,a,l,u,c;return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=function(){t.isError=!0,t.errorMessage="Nie znaleziono ksi\u0105\u017cek spe\u0142niaj\u0105cych podane kryteria",n(f.Z.error)},a=function(r){var i=(0,m.NA)(r,"message");t.isError=!0,t.errorMessage=i||"nieznany b\u0142\u0105d",e(t),n(f.Z.error)},r.next=4,fetch(i,{signal:s.signal}).catch((function(e){a(e)}));case 4:if(!(l=r.sent)){r.next=11;break}return r.next=8,l.json();case 8:u=r.sent,(c=(0,m.NA)(u,"totalItems"))?console.log(c):o();case 11:case"end":return r.stop()}}),r)})))).apply(this,arguments)}}(),(0,u.TA)({initialValues:D,onSubmit:function(e){var t=q(e);o(t),t.isValid&&(k(C(e)),y($(e)),console.log("totalnumber endpoint",$(e)))}})),A=S.values,N=S.handleSubmit,F=S.getFieldProps,_=S.handleReset,I=s.useCallback((function(){return""===Object.values(A).join("")}),[A]),R=s.useCallback((function(){o(H),_(null)}),[]);return s.useEffect((function(){var e=new AbortController;return v&&z(v,e),function(){return null===e||void 0===e?void 0:e.abort()}}),[v,z]),(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(X._z,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,p.jsx)(h.sF,{}),(0,p.jsx)(h.bZ,{shouldRender:!n.isValid,alertMessage:n.message}),(0,p.jsxs)(X.tW,{id:"search__form",children:[(0,p.jsx)(X.A4,{children:Object.values(U).map((function(e){return(0,p.jsx)(E,(0,r.Z)({isDisabled:Z,label:J[e]},F(e)),a()())}))}),(0,p.jsxs)(X.RJ,{children:[(0,p.jsx)(h.zx,{form:"search__form",disabled:Z||I()||!T,onClick:N,className:"button--ok",type:"submit",children:"Szukaj"}),(0,p.jsx)(h.zx,{disabled:Z||I(),onClick:R,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,p.jsx)(j,{})]})]})]})})}}}]);
//# sourceMappingURL=858.d319ae9e.chunk.js.map