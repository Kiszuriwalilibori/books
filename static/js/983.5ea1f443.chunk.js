"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[983],{983:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});var i=n(9379),r=n(5544),s=n(5043),o=n(2166),a=n(3892),l=n(8641),u=n(3216),c=n(7861),d=n(1031),f=n(6278),h=n(744),b=n(8049),m=n(4558);var v=n(579);var k=(0,o.Ng)(function(e){return{isLoading:e.loading.isLoading}},function(e){return{fetchFromFavorites:function(){return e(function(e){try{var t=new h.v_(function(e){return e.kind===m.XI}).getAll();e((0,b.storeBooks)(t)),e((0,b.setIsFromNetwork)(!1))}catch(i){var n=i instanceof Error?i.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";e((0,b.showError)({isError:!0,errorMessage:n}))}})}}})(function(e){var t=(0,u.Zp)(),n=e.fetchFromFavorites,i=e.isLoading,r=(0,f.cs)().favoriteBooks;return(0,v.jsx)(d.$n,{disabled:!r.areNotEmpty()||i,className:"button--favorites",onClick:function(){n(),t(c.A.books)},children:"Ulubione"})}),p=n(45),g=n(8623),j=["isDisabled","label","name"],w=function(e){var t=e.isDisabled,n=e.label,r=e.name,s=(0,p.A)(e,j);return(0,v.jsx)(d.m_,{role:"tooltip",title:"Nie mniej ni\u017c dwa znaki w tym jeden alfanumeryczny",placement:"top",children:(0,v.jsx)(g.A,(0,i.A)({disabled:t,"aria-label":"input field for ".concat(r," field"),label:n,id:r,size:"small",variant:"outlined"},s))})},A=n(3029),y=n(2901),x=n(6892),E=function(e){return e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety",e}({}),C=[{name:x.C.authors,placeholder:E.authors},{name:x.C.title,placeholder:E.title},{name:x.C.subject,placeholder:E.subject}],T=new(function(){return(0,y.A)(function e(t){(0,A.A)(this,e),this.fields=void 0,this.fields=t},[{key:"getPlaceholder",value:function(e){return this.fields.filter(function(t){return t.name===e})[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var t in this.fields)e[this.fields[t].name]="";return e}},{key:"getFields",get:function(){return this.fields}}])}())(C),S=n(7273),N=n.n(S),F=n(4320),L=n.n(F),O=n(4467),R=function(e){return e.KEYWORD="keyword",e.AUTHORS="authors",e.TITLE="title",e.SUBJECT="subject",e}({}),z=(0,O.A)((0,O.A)((0,O.A)((0,O.A)({},R.AUTHORS,"Autor"),R.TITLE,"Tytu\u0142"),R.SUBJECT,"Etykiety"),R.KEYWORD,"S\u0142owo kluczowe"),I=(0,O.A)((0,O.A)((0,O.A)((0,O.A)({},R.AUTHORS,""),R.TITLE,""),R.SUBJECT,""),R.KEYWORD,""),W={isValid:!0,message:""},D=function(e){var t=W,n=[],i=function(e){return e.length>=2&&/\d|[A-z]/.test(e)},r=N()(e);if(!L()(r))for(var s in r)if(!1===i(r[s])){var o=T.getPlaceholder(s);t={isValid:!1,message:"Nieprawid\u0142owe dane w polu "+o},n.push(o)}return!1===t.isValid&&(t.message="Nieprawid\u0142owe warto\u015bci w polach: "+n.join(", ")),t},U=n(3555),V=n.n(U),_=n(6665),B=n.n(_),M=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject,keyword:e.keyword};return"https://www.googleapis.com/books/v1/volumes?q="+V().flow(V().toPairs,V().filter(function(e){return!(""===e[1])}),V().map(function(e){return B()(e,":")}),V().join("+"))(t)+"&maxResults=40"+m.MD+"&startIndex="},P=n(2606),H=n(2442),J=function(){var e=s.useState(W),t=(0,r.A)(e,2),n=t[0],u=t[1],c=s.useState(""),h=(0,r.A)(c,2),b=h[0],m=h[1],p=(0,l.N)(function(e){return e.loading.isLoading},o.bN),g=(0,o.d4)(H.tp),j=(0,f.m5)(),A=(0,a.Wx)({initialValues:I,onSubmit:function(e){var t=D(e);u(t),t.isValid&&(console.log(e),m(M(e)))}}),y=A.values,x=A.handleSubmit,E=A.getFieldProps,C=A.handleReset,T=s.useCallback(function(){return""===Object.values(y).join("")},[y]),S=s.useCallback(function(){u(W),C(null)},[]);return s.useEffect(function(){var e=new AbortController;return b&&j(b,e),function(){return null===e||void 0===e?void 0:e.abort()}},[b,j]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)(P.LN,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,v.jsx)(d.M9,{}),(0,v.jsx)(d.Fc,{shouldRender:!n.isValid,alertMessage:n.message}),(0,v.jsxs)(P.kW,{id:"search__form",children:[(0,v.jsx)(P.OM,{children:Object.values(R).map(function(e){return(0,v.jsx)(w,(0,i.A)({isDisabled:p,label:z[e]},E(e)),e)})}),(0,v.jsxs)(P.aL,{children:[(0,v.jsx)(d.$n,{form:"search__form",disabled:p||T()||!g,onClick:x,className:"button--ok",type:"submit",children:"Szukaj"}),(0,v.jsx)(d.$n,{disabled:p||T(),onClick:S,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,v.jsx)(k,{})]})]})]})})}}}]);
//# sourceMappingURL=983.5ea1f443.chunk.js.map