"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[410],{7410:function(e,n,t){t.r(n),t.d(n,{default:function(){return G}});var i=t(5544),r=t(5043),a=t(4514),o=t(9379),s=t(3892),l=t(8222),u=t.n(l),c=t(4117),d=t(292),f=t(2606),h=t(3216),v=t(7861),m=t(7017),b=t(7671),p=t(8234),g=t(4558);var y=t(579);var A=(0,a.Ng)(function(e){return{isLoading:e.loading.isLoading}},function(e){return{fetchFromFavorites:function(){return e(function(e){try{var n=new b.v_(function(e){return e.kind===g.XI}).getAll();e((0,p.storeBooks)(n)),e((0,p.setIsFromNetwork)(!1))}catch(i){var t=i instanceof Error?i.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";e((0,p.showError)({isError:!0,errorMessage:t}))}})}}})(function(e){var n=(0,h.Zp)(),t=e.fetchFromFavorites,i=e.isLoading,a=(0,m.cs)().favoriteBooks,o=(0,c.Bd)().t,s=(0,r.useCallback)(function(){t(),n(v.A.books)},[t,n]);return(0,y.jsx)(d.$n,{disabled:!a.areNotEmpty()||i,className:"button--favorites",onClick:s,children:o("actions.favorites")})}),j=t(45),k=t(8623),x=["isDisabled","label","name","fieldErrors"],C=(0,r.memo)(function(e){var n=e.isDisabled,t=e.label,i=e.name,a=e.fieldErrors,s=(0,j.A)(e,x),l=(0,r.useMemo)(function(){return null===a||void 0===a?void 0:a.find(function(e){return e.field===i})},[a,i]),u=Boolean(l&&l.errors.length>0),c=(0,r.useMemo)(function(){var e="Wymagania:\n\u2022 Minimum 2 znaki\n\u2022 Co najmniej jedna litera lub cyfra\n\u2022 Bez spacji na pocz\u0105tku i ko\u0144cu";return u&&(e+="\n\nB\u0142\u0119dy w tym polu:\n".concat(l.errors.map(function(e){return"\u2022 ".concat(e)}).join("\n"))),e},[u,l]);return(0,y.jsx)(d.m_,{role:"tooltip",title:c,placement:"top",arrow:!0,children:(0,y.jsx)(k.A,(0,o.A)({disabled:n,"aria-label":"input field for ".concat(i," field"),label:t,id:i,size:"small",variant:"outlined"},s))})});C.displayName="SearchField";var w=C,E=t(3698),M=t(3029),F=t(2901),L=t(6892),S=function(e){return e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety",e}({}),B=[{name:L.C.authors,placeholder:S.authors},{name:L.C.title,placeholder:S.title},{name:L.C.subject,placeholder:S.subject}],D=(new(function(){return(0,F.A)(function e(n){(0,M.A)(this,e),this.fields=void 0,this.fields=n},[{key:"getPlaceholder",value:function(e){return this.fields.filter(function(n){return n.name===e})[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var n in this.fields)e[this.fields[n].name]="";return e}},{key:"getFields",get:function(){return this.fields}}])}())(B),t(4467)),N=t(7273),P=t.n(N),T=t(4320),V=t.n(T),W=t(4978),z=function(e){var n=[];return 0===e.length||(1===e.length&&n.push(W.Ay.t("validation.errorMessages.minLength")),/[A-Za-z0-9]/.test(e)||n.push(W.Ay.t("validation.errorMessages.alphanumeric")),e.trim()!==e&&n.push(W.Ay.t("validation.errorMessages.noSpaces")),/^\s*$/.test(e)&&e.length>0&&n.push(W.Ay.t("validation.errorMessages.onlyWhitespace")),/[<>{}[\]\\]/.test(e)&&n.push(W.Ay.t("validation.errorMessages.specialChars"))),n},I=function(e){return E.Pu[e]||e},O=function(e){var n=(0,o.A)({},E.T9),t=[],i=P()(e);if(!V()(i))for(var r in i){var a=i[r],s=z(a);s.length>0&&t.push({field:r,value:a,errors:s})}if(t.length>0){var l=W.Ay.t("validation.invalidFields",{fields:t.map(function(e){return I(e.field)}).join(", ")}),u=function(e){if(0===e.length)return"";var n=W.Ay.t("validation.title")+":\n";return e.forEach(function(e,t){var i=I(e.field);n+="\n".concat(t+1,". ").concat(W.Ay.t("validation.field"),' "').concat(i,'"'),e.value.length>20?n+=" (".concat(W.Ay.t("validation.value"),': "').concat(e.value.substring(0,20),'...")'):n+=" (".concat(W.Ay.t("validation.value"),': "').concat(e.value,'")'),e.errors.forEach(function(e){n+="\n   \u2022 ".concat(e)})}),n+="\n\n"+W.Ay.t("validation.requirements")+":",n+="\n\u2022 "+W.Ay.t("validation.ruleDescriptions.minLength"),n+="\n\u2022 "+W.Ay.t("validation.ruleDescriptions.alphanumeric"),n+="\n\u2022 "+W.Ay.t("validation.ruleDescriptions.noSpaces")}(t);n={isValid:!1,message:l,fieldErrors:t},console.group("\ud83d\udd0d "+W.Ay.t("validation.errorDetails")+":"),console.log(u),console.table(t.map(function(e){return(0,D.A)((0,D.A)((0,D.A)({},W.Ay.t("validation.field"),I(e.field)),W.Ay.t("validation.value"),e.value),W.Ay.t("validation.errors"),e.errors.join("; "))})),console.groupEnd()}return n},$=t(3555),R=t.n($),q=t(6665),X=t.n(q),Z=function(e){var n=e.isLoading,t=e.isOnline,a=e.onSubmit,l=e.onValidationChange,h=u()(),v=r.useState(E.T9),m=(0,i.A)(v,2),b=m[0],p=m[1],g=(0,c.Bd)().t,j=(0,s.Wx)({initialValues:E.LX,onSubmit:function(e){var n=O(e);p(n),l(n),n.isValid&&a(e)}}),k=j.values,x=j.handleSubmit,C=j.getFieldProps,M=j.handleReset,F=(0,r.useCallback)(function(){return""===Object.values(k).join("")},[k]),L=(0,r.useCallback)(function(){p(E.T9),l(E.T9),M(null)},[M,l]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.am,{shouldRender:!b.isValid,alertMessage:b.message,fieldErrors:b.fieldErrors,onClose:function(){p(E.T9),l(E.T9)}}),(0,y.jsxs)(f.kW,{id:h,children:[(0,y.jsx)(f.OM,{children:Object.values(E.y7).map(function(e){return(0,y.jsx)(w,(0,o.A)({isDisabled:n,label:E.Pu[e],fieldErrors:b.fieldErrors},C(e)),e)})}),(0,y.jsxs)(f.aL,{children:[(0,y.jsx)(d.$n,{form:h,disabled:n||F()||!t,onClick:x,className:"button--ok",type:"submit",children:g("searchPage.searchButton")}),(0,y.jsx)(d.$n,{disabled:n||F(),onClick:L,className:"button--problem",type:"reset",children:g("searchPage.clearButton")}),(0,y.jsx)(A,{})]})]})]})},_=t(3404),G=function(){var e=(0,r.useState)(""),n=(0,i.A)(e,2),t=n[0],o=n[1],s=(0,a.d4)(_.QW),l=(0,a.d4)(_.tp),u=(0,m.m5)(),c=(0,r.useCallback)(function(e){o(function(e){var n={inauthor:e.authors,intitle:e.title,subject:e.subject,keyword:e.keyword};return"https://www.googleapis.com/books/v1/volumes?q="+R().flow(R().toPairs,R().filter(function(e){return""!==(0,i.A)(e,2)[1]}),R().map(function(e){var n=(0,i.A)(e,2),t=n[0],r=n[1];return X()([t,r],":")}),R().join("+"))(n)+"&maxResults=40"+g.MD+"&startIndex="}(e))},[]),h=(0,r.useCallback)(function(e){},[]);return(0,r.useEffect)(function(){var e=new AbortController;return t&&(console.log(t),u(t,e)),function(){return e.abort()}},[t,u]),(0,y.jsxs)(f.LN,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,y.jsx)(d.M9,{}),(0,y.jsx)(Z,{isLoading:s,isOnline:l,onSubmit:c,onValidationChange:h})]})}}}]);
//# sourceMappingURL=410.c60d6705.chunk.js.map