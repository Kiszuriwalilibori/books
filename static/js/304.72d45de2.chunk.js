"use strict";(self.webpackChunkgoogle_books_finder=self.webpackChunkgoogle_books_finder||[]).push([[304],{2304:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var i=n(1413),a=n(9439),s=n(2791),o=n(2506),l=n(1573),r=n(364),u=n(7689),c=n(8869),d=n(402),f=n(4113),h=n(1107),m=n(184);var b=(0,r.$j)((function(e){return{isLoading:e.loading.isLoading}}),(function(e){return{fetchFromFavorites:function(){return e((0,h.o)())}}}))((function(e){var t=(0,u.s0)(),n=e.fetchFromFavorites,i=e.isLoading,a=(0,f.wR)().favoriteBooks;return(0,m.jsx)(d.zx,{disabled:!a.areNotEmpty()||i,className:"button--favorites",onClick:function(){n(),t(c.Z.books)},children:"Ulubione"})})),v=n(5987),g=n(1537),j=["isDisabled","label"];function p(e){e.target.focus()}var k,x=function(e){var t=e.isDisabled,n=e.label,a=(0,v.Z)(e,j);return(0,m.jsx)(d.u,{role:"tooltip",title:"Nie mniej ni\u017c dwa znaki w tym jeden alfanumeryczny",placement:"top",children:(0,m.jsx)(g.Z,(0,i.Z)({disabled:t,"aria-label":"input field for ".concat(e.name," field"),label:n,id:e.name,size:"small",variant:"outlined",onMouseEnter:p},a))})},w=n(871),y=n.n(w),Z=n(2809),T=n.n(Z),I=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+y().flow(y().toPairs,y().filter((function(e){return!(""===e[1])})),y().map((function(e){return T()(e,":")})),y().join("+"))(t)+"&maxResults=40&fields= items(id, volumeInfo/title, volumeInfo/authors, volumeInfo/publishedDate, volumeInfo/language, volumeInfo/categories,volumeInfo/subtitle )&startIndex="},S=n(5671),C=n(3144),E=n(9714);!function(e){e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety"}(k||(k={}));var z,A,F,_=[{name:E.a.authors,placeholder:k.authors},{name:E.a.title,placeholder:k.title},{name:E.a.subject,placeholder:k.subject}],R=new(function(){function e(t){(0,S.Z)(this,e),this.fields=void 0,this.fields=t}return(0,C.Z)(e,[{key:"getPlaceholder",value:function(e){return this.fields.filter((function(t){return t.name===e}))[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var t in this.fields)e[this.fields[t].name]="";return e}},{key:"getFields",get:function(){return this.fields}}]),e}())(_),U=n(7790),L=n.n(U),N=n(6364),V=n.n(N),O=n(4942);!function(e){e.AUTHORS="authors",e.TITLE="title",e.SUBJECT="subject"}(F||(F={}));var W=(z={},(0,O.Z)(z,F.AUTHORS,"Autor"),(0,O.Z)(z,F.TITLE,"Tytu\u0142"),(0,O.Z)(z,F.SUBJECT,"Etykiety"),z),B=(A={},(0,O.Z)(A,F.AUTHORS,""),(0,O.Z)(A,F.TITLE,""),(0,O.Z)(A,F.SUBJECT,""),A),D={isValid:!0,message:""},J=function(e){var t,n=D,i=[],a=L()(e);if(!V()(a))for(var s in a)if(!1===((t=a[s]).length>=2&&/\d|[A-z]/.test(t))){var o=R.getPlaceholder(s);n={isValid:!1,message:"Nieprawid\u0142owe dane w polu "+o},i.push(o)}return!1===n.isValid&&(n.message="Nieprawid\u0142owe warto\u015bci w polach: "+i.join(", ")),n},P=n(5374),H=n(6165),M=n(7014),q=function(){var e=s.useState(D),t=(0,a.Z)(e,2),n=t[0],u=t[1],c=s.useState(""),f=(0,a.Z)(c,2),h=f[0],v=f[1],g=(0,l.i)((function(e){return e.loading.isLoading}),r.wU),j=(0,r.v9)(M.YW),p=(0,P.l)(),k=(0,o.TA)({initialValues:B,onSubmit:function(e){var t=J(e);u(t),t.isValid&&v(I(e))}}),w=k.values,y=k.handleSubmit,Z=k.getFieldProps,T=k.handleReset,S=s.useCallback((function(){return""===Object.values(w).join("")}),[w]),C=s.useCallback((function(){u(D),T(null)}),[]);return s.useEffect((function(){var e=new AbortController;return h&&p(h,e),function(){return null===e||void 0===e?void 0:e.abort()}}),[h,p]),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)(H._z,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,m.jsx)(d.sF,{}),(0,m.jsx)(d.bZ,{shouldRender:!n.isValid,alertMessage:n.message}),(0,m.jsxs)(H.tW,{id:"search__form",children:[(0,m.jsx)(H.A4,{children:Object.values(F).map((function(e){return(0,m.jsx)(x,(0,i.Z)({isDisabled:g,label:W[e]},Z(e)),e)}))}),(0,m.jsxs)(H.RJ,{children:[(0,m.jsx)(d.zx,{form:"search__form",disabled:g||S()||!j,onClick:y,className:"button--ok",type:"submit",children:"Szukaj"}),(0,m.jsx)(d.zx,{disabled:g||S(),onClick:C,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,m.jsx)(b,{})]})]})]})})}}}]);
//# sourceMappingURL=304.72d45de2.chunk.js.map