"use strict";(self.webpackChunkgoogle_books_finder=self.webpackChunkgoogle_books_finder||[]).push([[304],{2304:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var i=n(1413),a=n(9439),s=n(2791),r=n(2506),o=n(1573),l=n(364),u=n(7689),c=n(8869),d=n(402),f=n(4113),h=n(1107),b=n(184);var m=(0,l.$j)((function(e){return{isLoading:e.loading.isLoading}}),(function(e){return{fetchFromFavorites:function(){return e((0,h.o)())}}}))((function(e){var t=(0,u.s0)(),n=e.fetchFromFavorites,i=e.isLoading,a=(0,f.wR)().favoriteBooks;return(0,b.jsx)(d.zx,{disabled:!a.areNotEmpty()||i,className:"button--favorites",onClick:function(){n(),t(c.Z.books)},children:"Ulubione"})})),v=n(5987),j=n(1537),g=["isDisabled","label"];function p(e){e.target.focus()}var k,x=function(e){var t=e.isDisabled,n=e.label,a=(0,v.Z)(e,g);return(0,b.jsx)(d.u,{role:"tooltip",title:"Nie mniej ni\u017c dwa znaki w tym jeden alfanumeryczny",placement:"top",children:(0,b.jsx)(j.Z,(0,i.Z)({disabled:t,"aria-label":"input field for ".concat(e.name," field"),label:n,id:e.name,size:"small",variant:"outlined",onMouseEnter:p},a))})},w=n(871),y=n.n(w),Z=n(2809),T=n.n(Z),S=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+y().flow(y().toPairs,y().filter((function(e){return!(""===e[1])})),y().map((function(e){return T()(e,":")})),y().join("+"))(t)+"&maxResults=40&startIndex="},C=n(5671),E=n(3144),z=n(9714);!function(e){e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety"}(k||(k={}));var A,F,_,R=[{name:z.a.authors,placeholder:k.authors},{name:z.a.title,placeholder:k.title},{name:z.a.subject,placeholder:k.subject}],U=new(function(){function e(t){(0,C.Z)(this,e),this.fields=void 0,this.fields=t}return(0,E.Z)(e,[{key:"getPlaceholder",value:function(e){return this.fields.filter((function(t){return t.name===e}))[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var t in this.fields)e[this.fields[t].name]="";return e}},{key:"getFields",get:function(){return this.fields}}]),e}())(R),L=n(7790),N=n.n(L),V=n(6364),I=n.n(V),O=n(4942);!function(e){e.AUTHORS="authors",e.TITLE="title",e.SUBJECT="subject"}(_||(_={}));var B=(A={},(0,O.Z)(A,_.AUTHORS,"Autor"),(0,O.Z)(A,_.TITLE,"Tytu\u0142"),(0,O.Z)(A,_.SUBJECT,"Etykiety"),A),J=(F={},(0,O.Z)(F,_.AUTHORS,""),(0,O.Z)(F,_.TITLE,""),(0,O.Z)(F,_.SUBJECT,""),F),P={isValid:!0,message:""},W=function(e){var t,n=P,i=[],a=N()(e);if(!I()(a))for(var s in a)if(!1===((t=a[s]).length>=2&&/\d|[A-z]/.test(t))){var r=U.getPlaceholder(s);n={isValid:!1,message:"Nieprawid\u0142owe dane w polu "+r},i.push(r)}return!1===n.isValid&&(n.message="Nieprawid\u0142owe warto\u015bci w polach: "+i.join(", ")),n},D=n(5374),H=n(6165),M=function(){var e=s.useState(P),t=(0,a.Z)(e,2),n=t[0],u=t[1],c=s.useState(""),f=(0,a.Z)(c,2),h=f[0],v=f[1],j=(0,o.i)((function(e){return e.loading.isLoading}),l.wU),g=(0,D.l)(),p=(0,r.TA)({initialValues:J,onSubmit:function(e){var t=W(e);u(t),t.isValid&&v(S(e))}}),k=p.values,w=p.handleSubmit,y=p.getFieldProps,Z=p.handleReset,T=s.useCallback((function(){return""===Object.values(k).join("")}),[k]),C=s.useCallback((function(){u(P),Z(null)}),[]);return s.useEffect((function(){var e=new AbortController;return h&&g(h,e),function(){return null===e||void 0===e?void 0:e.abort()}}),[h,g]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(H._z,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,b.jsx)(d.sF,{}),(0,b.jsx)(d.bZ,{shouldRender:!n.isValid,alertMessage:n.message}),(0,b.jsxs)(H.tW,{id:"search__form",children:[(0,b.jsx)(H.A4,{children:Object.values(_).map((function(e){return(0,b.jsx)(x,(0,i.Z)({isDisabled:j,label:B[e]},y(e)),e)}))}),(0,b.jsxs)(H.RJ,{children:[(0,b.jsx)(d.zx,{form:"search__form",disabled:j||T(),onClick:w,className:"button--ok",type:"submit",children:"Szukaj"}),(0,b.jsx)(d.zx,{disabled:j||T(),onClick:C,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,b.jsx)(m,{})]})]})]})})}}}]);
//# sourceMappingURL=304.eeba599f.chunk.js.map