"use strict";(self.webpackChunkgoogle_books_finder=self.webpackChunkgoogle_books_finder||[]).push([[682],{1682:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});var i=n(1413),r=n(9439),s=n(2791),a=n(364),o=n(2506),l=n(1573),u=n(7689),c=n(8869),d=n(5357),f=n(743),h=n(4706),b=n(4467),m=n(9478);var g=n(184);var v=(0,a.$j)((function(e){return{isLoading:e.loading.isLoading}}),(function(e){return{fetchFromFavorites:function(){return e((function(e){try{var t=new h.X4((function(e){return e.kind===m.Zg})).getAll();e((0,b.storeBooks)(t)),e((0,b.setIsFromNetwork)(!1))}catch(i){var n=i instanceof Error?i.message:"Podczas pr\xf3by pobrania ulubionych wyst\u0105pi\u0142 b\u0142\u0105d";e((0,b.showError)({isError:!0,errorMessage:n}))}}))}}}))((function(e){var t=(0,u.s0)(),n=e.fetchFromFavorites,i=e.isLoading,r=(0,f.wR)().favoriteBooks;return(0,g.jsx)(d.zx,{disabled:!r.areNotEmpty()||i,className:"button--favorites",onClick:function(){n(),t(c.Z.books)},children:"Ulubione"})})),j=n(5987),p=n(65),k=["isDisabled","label","name"];function w(e){e.target.focus()}var x,y=function(e){var t=e.isDisabled,n=e.label,r=e.name,s=(0,j.Z)(e,k);return(0,g.jsx)(d.u,{role:"tooltip",title:"Nie mniej ni\u017c dwa znaki w tym jeden alfanumeryczny",placement:"top",children:(0,g.jsx)(p.Z,(0,i.Z)({disabled:t,"aria-label":"input field for ".concat(r," field"),label:n,id:r,size:"small",variant:"outlined",onMouseEnter:w},s))})},Z=n(871),T=n.n(Z),E=n(2809),S=n.n(E),z=function(e){var t={inauthor:e.authors,intitle:e.title,subject:e.subject};return"https://www.googleapis.com/books/v1/volumes?q="+T().flow(T().toPairs,T().filter((function(e){return!(""===e[1])})),T().map((function(e){return S()(e,":")})),T().join("+"))(t)+"&maxResults=40"+m._M+"&startIndex="},C=n(5671),A=n(3144),F=n(9714);!function(e){e.authors="Autor",e.title="Tytu\u0142",e.subject="Etykiety"}(x||(x={}));var _,N,R,U=[{name:F.a.authors,placeholder:x.authors},{name:F.a.title,placeholder:x.title},{name:F.a.subject,placeholder:x.subject}],I=new(function(){function e(t){(0,C.Z)(this,e),this.fields=void 0,this.fields=t}return(0,A.Z)(e,[{key:"getPlaceholder",value:function(e){return this.fields.filter((function(t){return t.name===e}))[0].placeholder}},{key:"getSearchFieldsWithInitialValues",get:function(){var e={};for(var t in this.fields)e[this.fields[t].name]="";return e}},{key:"getFields",get:function(){return this.fields}}]),e}())(U),L=n(7790),V=n.n(L),P=n(6364),B=n.n(P),O=n(4942);!function(e){e.AUTHORS="authors",e.TITLE="title",e.SUBJECT="subject"}(R||(R={}));var W=(_={},(0,O.Z)(_,R.AUTHORS,"Autor"),(0,O.Z)(_,R.TITLE,"Tytu\u0142"),(0,O.Z)(_,R.SUBJECT,"Etykiety"),_),J=(N={},(0,O.Z)(N,R.AUTHORS,""),(0,O.Z)(N,R.TITLE,""),(0,O.Z)(N,R.SUBJECT,""),N),M={isValid:!0,message:""},D=function(e){var t,n=M,i=[],r=V()(e);if(!B()(r))for(var s in r)if(!1===((t=r[s]).length>=2&&/\d|[A-z]/.test(t))){var a=I.getPlaceholder(s);n={isValid:!1,message:"Nieprawid\u0142owe dane w polu "+a},i.push(a)}return!1===n.isValid&&(n.message="Nieprawid\u0142owe warto\u015bci w polach: "+i.join(", ")),n},H=n(5374),q=n(2465),G=n(7014),X=function(){console.log("SearchPage render");var e=s.useState(M),t=(0,r.Z)(e,2),n=t[0],u=t[1],c=s.useState(""),f=(0,r.Z)(c,2),h=f[0],b=f[1],m=(0,l.i)((function(e){return e.loading.isLoading}),a.wU),j=(0,a.v9)(G.YW),p=(0,H.l)(),k=(0,o.TA)({initialValues:J,onSubmit:function(e){var t=D(e);u(t),t.isValid&&b(z(e))}}),w=k.values,x=k.handleSubmit,Z=k.getFieldProps,T=k.handleReset,E=s.useCallback((function(){return""===Object.values(w).join("")}),[w]),S=s.useCallback((function(){u(M),T(null)}),[]);return s.useEffect((function(){var e=new AbortController;return h&&p(h,e),function(){return null===e||void 0===e?void 0:e.abort()}}),[h,p]),(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(q._z,{maxWidth:!1,disableGutters:!0,sx:{alignItems:"unset"},children:[(0,g.jsx)(d.sF,{}),(0,g.jsx)(d.bZ,{shouldRender:!n.isValid,alertMessage:n.message}),(0,g.jsxs)(q.tW,{id:"search__form",children:[(0,g.jsx)(q.A4,{children:Object.values(R).map((function(e){return(0,g.jsx)(y,(0,i.Z)({isDisabled:m,label:W[e]},Z(e)),e)}))}),(0,g.jsxs)(q.RJ,{children:[(0,g.jsx)(d.zx,{form:"search__form",disabled:m||E()||!j,onClick:x,className:"button--ok",type:"submit",children:"Szukaj"}),(0,g.jsx)(d.zx,{disabled:m||E(),onClick:S,className:"button--problem",type:"reset",children:"Wyczy\u015b\u0107"}),(0,g.jsx)(v,{})]})]})]})})}}}]);
//# sourceMappingURL=682.7ae99da9.chunk.js.map